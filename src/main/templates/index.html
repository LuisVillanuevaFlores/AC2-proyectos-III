<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://cdn.anychart.com/releases/8.7.1/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.7.1/js/anychart-graph.min.js"></script>
    <script src="//www.amcharts.com/lib/4/core.js"></script>
  <script src="//www.amcharts.com/lib/4/charts.js"></script>
  <script src="//www.amcharts.com/lib/4/plugins/forceDirected.js"></script> 
  
  <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <title>AC2</title>
  </head>
  <body>

    <div class="con">
        <div class="row">
          <div class="col-lg-4">

              <button type="button" class="btn btn-danger" id="back">BACK</button>

              <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  View
                </button>
              <div class="dropdown-menu" id="drop_type0">
                  <a class="dropdown-item" id="dir_view0">Directory View</a>
                  <a class="dropdown-item" id="integ_view0">Integrated View</a>
                  <a class="dropdown-item" id="collab_view0">Collaboration Graph View</a>
                  <a class="dropdown-item" id="call_view0">Call Graph View</a>
              </div>

              </div>

              <!-- Example single danger button -->
              <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Tag
                </button>
                <div class="dropdown-menu" id="drop">
                </div>
              </div>

              <a><span id="first_tag">Select a Tag</span></a>
            <div id="menu">
            </div>
          </div>
          <div class="col-lg-8">
            <div class="container mast" id="mast1">
              <span class="PFile"><span id="diamond"></span>&nbsp (.py) File</span>
              <span class="File"><span id="square"></span>&nbsp &nbsp &nbsp File</span>
              <span class="HomeDir"><span id="triangle"></span>&nbsp &nbsp &nbsp Root Directory</span>
              <span class="Directory"><span id="triangle"></span>&nbsp &nbsp &nbsp Directory</span>
              <span class="Added">Added</span>
              <span class="Deleted">Deleted</span>
            </div>

            <!-- Dynamic Labels -->

            <div class="container mast2" id="mast2">
              <span class="PFile"><span id="diamond"></span>&nbsp (.py) File</span>
              <span class="File"><span id="square"></span>&nbsp &nbsp &nbsp File</span>
              <span class="Func"><span id="triangle"></span>&nbsp &nbsp &nbsp Function Call</span>
              <!-- <span class="Func">Function Call</span> -->
              <span class="FuncDef"><span id="square"></span>&nbsp &nbsp &nbsp Function Definition</span>
              <span class="Class"><span id="square"></span>&nbsp &nbsp &nbsp Class Definition</span>
              <!-- <span class="HomeDir">Root Directory</span>
              <span class="Directory">Directory</span> -->
              <span class="Module"><span id="square"></span>&nbsp &nbsp &nbsp Module</span>
              <span class="Added">Added</span>
              <span class="Deleted">Deleted</span>
            </div>

            <div class="container mast3" id="mast3">
              <span class="Module"><span id="square"></span>&nbsp &nbsp &nbsp Module</span>
              <span class="PFile"><span id="square"></span>&nbsp &nbsp &nbsp (.py) File</span>
              <span class="File"><span id="square"></span>&nbsp &nbsp &nbsp File</span>
              <span class="Class"><span id="square"></span>&nbsp &nbsp &nbsp Class Definition</span>
              <!-- <span class="Module">Module</span>
              <span class="File">File</span> -->
              <!-- <span class="HomeDir">Root Directory</span>
              <span class="Directory">Directory</span> -->
              <span class="Added">Added</span>
              <span class="Deleted">Deleted</span>
            </div>


            <div class="container mast4" id="mast4">
              <!-- <span class="PFile">(.py) File</span>
              <span class="Func">Function Call</span>
              <span class="FuncDef">Function Definition</span>
              <span class="Class">Class Definition</span>
              <span class="Module">Module</span> -->
              <span class="PFile"><span id="square"></span>&nbsp &nbsp &nbsp (.py) File</span>
              <span class="File"><span id="square"></span>&nbsp &nbsp &nbsp File</span>
              <span class="Func"><span id="triangle"></span>&nbsp &nbsp &nbsp Function Call</span>
              <span class="FuncDef"><span id="square"></span>&nbsp &nbsp &nbsp Function Definition</span>
              <!-- <span class="Class"><span id="square"></span>&nbsp &nbsp &nbsp Class Definition</span> -->
              <span class="Module"><span id="square"></span>&nbsp &nbsp &nbsp Module</span>
            </div>

            <hr>

            <div id="container">
            </div>
          </div>
        </div>
        <hr>


        <div class="row">
          <div class="col-lg-4">

              <button type="button" class="btn btn-danger" id="back2">BACK</button>
              <!-- <button type="button" class="btn btn-success" id="get_calls2">Extract Python Graphs</button>
               -->
              <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  View
                </button>
              <div class="dropdown-menu" id="drop_type">
                  <a class="dropdown-item" id="dir_view">Directory View</a>
                  <a class="dropdown-item" id="integ_view">Integrated View</a>
                  <a class="dropdown-item" id="collab_view">Collaboration Graph View</a>
                  <a class="dropdown-item" id="call_view">Call Graph View</a>
                </div>

              </div>
              <!-- Example single danger button -->
              <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Tag
                </button>
                <div class="dropdown-menu" id="drop2">
                </div>
              </div>
              <a><span id="second_tag">Select Another Tag to Compare</span></a>
            <div id="menu2">
            </div>

            <a id="num_added"></a>
            <a id="num_deleted"></a>

            <hr>

            <div class="container">
              <a class='row' id="funcDef_added"></a>
              <a class='row' id="classes_added"></a>
              <a class='row' id="func_added"></a>
              <a class='row' id="modules_added"></a>
              <a class='row' id="files_added"></a>

            </div>

            <h4><span class="badge badge-secondary" id="metric_a2a">Architectural Similarity: </span></h4>
              <h4><span class="badge badge-secondary" id="metric_c2c0">Functional Similarity: </span></h4>
              <h4><span class="badge badge-secondary" id="metric_c2c1">Class Similarity: </span></h4>
              <h4><span class="badge badge-secondary" id="metric_c2c2">Module Similarity: </span></h4>

          </div>
          <div class="col-lg-8">
            <div id="container2"> </div>
          </div>
        </div>


      </div>

    
    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  </body>




  <style>

#diamond {
      width: 0;
      height: 0;
      border: 10px solid transparent;
      border-bottom-color: white;
      position: relative;
      top: -20px;
    }
    #diamond:after {
      content: '';
      position: absolute;
      left: -10px;
      top: 30px;
      width: 0;
      height: 0;
      border: 10px solid transparent;
      border-top-color: white;
    }

    #triangle {
      position: absolute;
      width: 0px;
      height: 0px;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-bottom: 20px solid white;
      /* top: -10px; */
      /* margin-right: 20px; */
    }

    #circle {
      width: 100px;
      height: 100px;
      background: red;
      border-radius: 50%
    }

    #square {
      position: absolute;
      width: 10px;
      height: 10px;
      border: 10px solid white;
      /* background: red; */
    }
  

    #num_added{
      color: white;
      border-radius: 5px;
      padding: 5px;
      background-color: green;
    }

    
    #num_deleted{
      color: white;
      border-radius: 5px;
      padding: 5px;
      background-color: red;
    }

    #funcDef_added{
      
      border-radius: 5px;
      padding: 5px;
      width: fit-content;
    }

    
    #classes_added{
      
      border-radius: 5px;
      padding: 5px;
      width: fit-content;
    }

    #func_added{
      
      border-radius: 5px;
      padding: 5px;
      width: fit-content;
    }

    
    #modules_added{
      
      border-radius: 5px;
      padding: 5px;
      width: fit-content;
    }

    #files_added{
      
      border-radius: 5px;
      padding: 5px;
      width: fit-content;
    }

    .mast{
      display: flex;
      justify-content: space-between;
    }

    .PFile{
      background-color: #0099ff;
      color: white;
      padding:5px;
      border-radius: 5px;
      
    }

    .File{
    background-color: #c1e04d;
    color: rgb(46, 6, 6);
    padding:5px;
    border-radius: 5px;
    width: 8%;
    text-align: center;
    }

    .HomeDir{
     
      background-color: #cea70a;
      color: white;
    padding:5px;
    border-radius: 5px;
    }
    .Directory{
      background-color: #794a04;
      color: white;
    padding:5px;
    border-radius: 5px;
    }

    .FuncDef{
      background-color: #0e4efa;
      color: white;
    padding:5px;
    border-radius: 5px;
    }
    .Module{
      background-color: #e71fc6;
      color: white;
    padding:5px;
    border-radius: 5px;
    }
    .Class{
      background-color: #920be0;
      color: white;
    padding:5px;
    border-radius: 5px;
    }

    .Func{
      background-color: #e27979;
      color: white;
    padding:5px;
    border-radius: 5px;
    }

    .Added{
      background-color: #0be016;
      color: white;
    padding:5px;
    border-radius: 5px;
    }

    .Deleted{
      background-color: #f50a0a;
      color: white;
    padding:5px;
    border-radius: 5px;
    }

    

    html, 
    body {
        padding: 20px;
        height: 100%;
        /* background: rgb(255, 245, 255); */
    }


  
    .row{
      height: fit-content;
    }

    #first_tag, #second_tag{
      padding: 10px;
    }

    .con{
        width: 100%;
        height: fit-content;
        
    }


    #container{
        
        height: 500px;
        /* border: 1px solid pink; */
        border-radius: 10px;
        
    }



    #menu{
      padding: 20px;
      
    }

    #container2{
        
        height: 500px;
        /* border: 1px solid pink; */
        border-radius: 10px;
        
    }



    #menu2{
      padding: 20px;
      
    }

    .btn-info{
      padding: 0px;
      width: 100%;
    }
</style>

<script>


document.getElementById('mast1').style.display = "block";
  
document.getElementById('mast2').style.display = "none";
document.getElementById('mast3').style.display = "none";

document.getElementById('mast4').style.display = "none";



var ulti_dict = JSON.parse({{ ulti_dict|tojson }})

// ulti_dict = JSON.aprse(ulti_dict);

var ulti_tree = {{ ulti_tree|tojson }}

var metric_a2a = {{ metric_a2a|tojson }}

var metric_c2c = {{ metric_c2c|tojson }}

var tags = {{ tags|safe }}


// THE Start of First View

var keys = [];

let cur_sup_files = [];

let stack = [];


// If none selected use 0 as normal
prev_tag = 0;
cur_tag = 0;

var tree = ulti_tree['body'][i+1];
var calls = ulti_dict[i+1];


// Adding the dropdown

//  Creating tags
for(var i=0; i<tags.length; i++){
  var dd = document.createElement('a');
  // dd.setAttribute('class', 'dropdown-item');
  // dd.setAttribute('id', i);
  // dd.setAttribute('value', "tags[i]");
  // dd.setAttribute('href', '#');

  dd.innerHTML = "<a class=\"dropdown-item\" id="+i+" href=\"#\" onclick='SetTag("+i+")'>"+ tags[i] +"</a>"

  var menu = document.getElementById('drop');
  menu.appendChild(dd);
  
}

// Setting the tag
function SetTag(i){

  
  document.getElementById('first_tag').innerHTML = tags[i];
  prev_tag = i;
  
  display_metric();
  
  tree = ulti_tree['body'][i+1];
  calls = ulti_dict[i+1];

  keys = [];

  cur_sup_files = [];
  stack = [];

  for (var k in tree){
    keys.push(k);
  }

  let curr = keys[0];
  root = keys[0];

  stack.push(keys[0]);

  level(keys[0], "container" , "no");


}
SetTag(0);


function display_metric(){
  console.log(metric_a2a);
  console.log(prev_tag + " " + cur_tag);
  temp_met = metric_a2a['body'][prev_tag][cur_tag]; 

  temp_metc = metric_c2c['body'][prev_tag][cur_tag]; 
  // alert(temp_met)
  
  document.getElementById('metric_a2a').innerHTML = "Architectural Similarity: " + temp_met + "%";
  document.getElementById('metric_c2c0').innerHTML = "Functional Similarity: " + temp_metc[0]+ "%";
  document.getElementById('metric_c2c1').innerHTML = "Class Similarity: " + temp_metc[1]+ "%";
  document.getElementById('metric_c2c2').innerHTML = "Module Similarity: " + temp_metc[2]+ "%";
  
}

display_metric();

// Get calls 
// This is where I have to change 1
document.getElementById("integ_view0").onclick = function() {

  document.getElementById('mast1').style.display = "none";
  
  document.getElementById('mast2').style.display = "block";
  document.getElementById('mast3').style.display = "none";
  
  document.getElementById('mast4').style.display = "none";
    
  var new_data = {'nodes': [], 'edges':[]}
  var completed = [];
  

    cur_sup_files.forEach((file) => {
      console.log(file);
      new_temp = calls[file];
      console.log("testing");
      console.log(new_temp);
      // File
      group = file;

      
      // console.log(new_temp);
      // for( var i = 0; i < new_temp.length ; i++){
      //   console.log(new_temp[i]);
      // }

      // var node_list = [];
      // var edge_list = [];
      

      for (var key in new_temp) {
        if (new_temp.hasOwnProperty(key)){
          temp_new_dat = Object.values(new_temp[key]);
          console.log(temp_new_dat);

          
          
          for(var i in temp_new_dat){
            from = key;
            to = temp_new_dat[i][0];

            // completed.push(to);

            // if(!(to in completed)){
            //   completed.push(to);
            //   // new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Function Definition", color: "#0e4efa", shape:"square"});
            // }

            // if(completed.indexOf(to) === -1){
            //   new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Function Definition", color: "#0e4efa", shape:"square"});
            //   completed.push(to);
            // }

            type_ = temp_new_dat[i][1];
            console.log(from + " : " + to);



            

            
             if(type_ == "funcDef"){

                  temp_node_dir2 = {id: to, group:'func_Def', normal: {
                          height: 8,
                          fill: '#0e4efa',
                      }, hovered: {
                        height: 10,
                          fill: '#0e4efa'
                      }, selected: {
                        height: 12,
                          fill: '#0e4efa'
                      }, shape: "square"}

                      // new_data['nodes'].push(temp_node_dir2);

                      if(completed.indexOf(to) === -1){
                        new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Function Definition", color: "#0e4efa", shape:"square"});
                        completed.push(to);
                      }

                     
                      
                      
              
                  
                  }

                  if(type_ == "ClassDef"){

                      temp_node_dir2 = {id: to,group:'class_Def', normal: {
                              height: 8,
                              fill: '#920be0',
                          }, hovered: {
                            height: 10,
                              fill: '#920be0'
                          }, selected: {
                            height: 12,
                              fill: '#920be0'
                          }, shape: "circle"}

                          // new_data['nodes'].push(temp_node_dir2);
                          

                          if(completed.indexOf(to) === -1){
                            new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Class Definition", color: "#920be0", shape:"triangle"});
                            completed.push(to);
                          }

                          
                      
                      }

                  if(type_ == "func"){

                  temp_node_dir2 = {id: to, group:'func_Call',normal: {
                          height: 6,
                          fill: '#e27979',
                      }, hovered: {
                        height: 8,
                          fill: '#e27979'
                      }, selected: {
                        height: 10,
                          fill: '#e27979'
                      }, shape: "triangle"}

                      // new_data['nodes'].push(temp_node_dir2);
                     

                    if(completed.indexOf(to) === -1){
                      new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Function Call", color: "#e27979", shape:"triangle"});
                      completed.push(to);
                    }

                      
              
                  }

                  if(type_ == "module"){

                    temp_node_dir2 = {id: to,group:'module', normal: {
                            height: 3,
                            fill: '#e71fc6',
                        }, hovered: {
                          height: 4,
                            fill: '#e71fc6'
                        }, selected: {
                          height: 5,
                            fill: '#e71fc6'
                        }, shape: "square"}

                        // new_data['nodes'].push(temp_node_dir2);

                        

                          if(completed.indexOf(to) === -1){
                            new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Module", color: "#e71fc6", shape:"square"});
                            completed.push(to);
                          }
                        
                        
              
                        
                    }


                    if(type_ == "file"){

                      temp_node_dir2 = {id: to, group:'file',normal: {
                              height: 3,
                              fill: '#c1e04d',
                          }, hovered: {
                            height: 4,
                              fill: '#c1e04d'
                          }, selected: {
                            height: 5,
                              fill: '#c1e04d'
                          }, shape: "square"}

                          // new_data['nodes'].push(temp_node_dir2);
                          

                          if(completed.indexOf(to) === -1){
                            new_data['nodes'].push({id: to, physics:false, label: to, size: 5, title:"File", color: "#c1e04d", shape:"square"});
                            completed.push(to);
                          }
                          
                          

                      }

            
                    // try {
                    //   new_data['nodes'].push({id: from, physics:false, label: from, size: 5, color: "#000", shape:"square"});
                    // } catch (error) {
                    //   console.log(error);
                    // }

                    if(completed.indexOf(from) === -1){
                      new_data['nodes'].push({id: from, physics:false, label: from, size: 5, color: "#999", shape:"square"});
                      completed.push(from);
                    }
                      

            // temp_node_dir = {id: from, group: 'undetermined', normal: {
            //     height: 8,
            //     fill: '#000',
            // }, hovered: {
            //   height: 10,
            //     fill: '#000'
            // }, selected: {
            //   height: 12,
            //     fill: '#000'
            // }, shape: "square"}

            // new_data['nodes'].push(temp_node_dir);


            // temp_edge_dir = {'from': from, 'to':to}
            new_data['edges'].push({from: from, 
													to: to, 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});
            




          }
        }
      }

      console.log(completed);
    });

    // uniq = [...new Set(new_data['nodes'])];

    console.log(new_data['nodes']);
    


    var nodes = new vis.DataSet(new_data['nodes']);
    var edges = new vis.DataSet(new_data['edges']);



      // console.log("testing2")
      // console.log(new_data);

      const myNode2 = document.getElementById("container");

      // var container = document.getElementById("container");
      myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);

    //   var chart = anychart.graph(new_data);
    // // set the container id
    //   chart.container("container");
    //   chart.layout().iterationCount(2000);
    //   // chart.nodes().labels().enabled(true);
    //   // chart.nodes().labels().fontSize(10);
    //   // chart.nodes().labels().fontWeight(300);
    //   // initiate drawing the chart
    //   chart.nodes().tooltip().useHtml(true);
    //       chart.nodes().tooltip().format(
    //         "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
    //       );
    //       chart.interactivity().hoverGap(30);  
    //       chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
    //   chart.draw();
    //   chart.title("Integrated View");


}

// Back functiom
document.getElementById("back").onclick = function() {
    
            prev_lev = stack.pop();

            if(prev_lev != root){
                level(stack.pop(), "container");
            }else{
              stack.push(prev_lev);
            }
            // if (prev_lev!=undefined){
            //   level(prev_lev);
            //   curr = prev_lev;
            // }   
    }

// Adding the directory to view
function add_directory_to_view(dir_name){
        var element = document.createElement("input");
        element.type = "button";
        element.setAttribute("class", "btn btn-info");
        // element.setAttribute("id", dir_name);
        element.setAttribute("value", dir_name);
        element.onclick = function () { level(dir_name, "container"); };
        
        var foo = document.getElementById("menu");
        foo.appendChild(element);
        var element = document.createElement("br");
        foo.appendChild(element);
        foo.appendChild(element);
    }

function clear_data(){
  const myNode = document.getElementById("menu");
  myNode.innerHTML = '';

  const myNode2 = document.getElementById("container");
  myNode2.innerHTML = '';
}

// This is where I have to change 2: Directory view
function level(lev, cont, yes_no){

  cur_sup_files = [];

  var completed = [];

  clear_data();

    console.log(lev);
    var new_data = {'nodes': [], 'edges':[]}
    
    temp = tree[lev];

    


    temp_node_dir = {id: lev, group: '', normal: {
                fill: '#cea70a',
                height: 30
            }, hovered: {
                fill: '#cea70a',
                height: 40
            }, selected: {
                fill: '#cea70a',
                height: 50
            }}

    
    if(completed.indexOf(lev) === -1){
      new_data['nodes'].push({id: lev, physics:false, label: lev, size: 5, title:"Root directory", color: "#cea70a", shape:"triangle"});
      completed.push(lev);
    }

    // new_data['nodes'].push(temp_node_dir);
    add_directory_to_view(lev);


    // for(var k in temp){
    
    
  // }
  
  for(var k in temp){

    if (temp[k]['type'] == 'dir'){

        temp_node_dir = {id: temp[k]['value'], group: 'directory', normal: {
              height: 20,
              fill: '#794a04',
          }, hovered: {
            height: 30,
              fill: '#794a04'
          }, selected: {
            height: 40,
              fill: '#794a04'
          }}

          // new_data['nodes'].push(temp_node_dir);

          if(completed.indexOf(temp[k]['value']) === -1){
            new_data['nodes'].push({id: temp[k]['value'], physics:false, label: temp[k]['value'], size: 5, title:"Directory", color: "#794a04", shape:"triangle"});
            completed.push(temp[k]['value']);
          }

          add_directory_to_view(temp[k]['value']);

          console.log('Directory');
          temp_edge_dir3 = {'from': lev, 'to':temp[k]['value']}



          // new_data['edges'].push(temp_edge_dir3);   

          new_data['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});

      }else if (temp[k]['type'] == 'file'){

        var res = temp[k]['value'].split(".");

        var king = res[res.length-1];

        if (king=='py'){

          cur_sup_files.push(temp[k]['value']);
          
          temp_node_dir4 = {id: temp[k]['value'], group: 'python_File(.py)',normal: {
                            fill: '#0099ff',
                            height: 20
                        }, hovered: {
                            fill: '#0099ff',
                            height: 30
                        }, selected: {
                            fill: '#0099ff',
                            height: 40
                        }, shape: "diamond"}

            // new_data['nodes'].push(temp_node_dir4);

            if(completed.indexOf(temp[k]['value']) === -1){
            new_data['nodes'].push({id: temp[k]['value'], physics:false, label: temp[k]['value'], size: 5, title:"File", color: "#0099ff", shape:"diamond"});
            completed.push(temp[k]['value']);
          }

            console.log('File');
            temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}

            // new_data['edges'].push(temp_edge_dir2);


            new_data['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});

        }else{

          // cur_sup_files.push(temp[k]['value']);
          
          temp_node_dir4 = {id: temp[k]['value'], group: 'file', normal: {
                            fill: '#c1e04d',
                            height: 10
                        }, hovered: {
                            fill: '#c1e04d',
                            height: 15
                        }, selected: {
                            fill: '#c1e04d',
                            height: 20
                        }, shape: "square"}

            // new_data['nodes'].push(temp_node_dir4);
          if(completed.indexOf(temp[k]['value']) === -1){
            new_data['nodes'].push({id: temp[k]['value'], physics:false, label: temp[k]['value'], size: 5, title:"File", color: "#c1e04d", shape:"square"});
            completed.push(temp[k]['value']);
          }

            console.log('File');
            temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}

            // new_data['edges'].push(temp_edge_dir2);

            new_data['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});

        }
                    
            
        }

  }

  // return new_data;


  var nodes = new vis.DataSet(new_data['nodes']);
    var edges = new vis.DataSet(new_data['edges']);



      // console.log("testing2")
      // console.log(new_data);

      const myNode2 = document.getElementById(cont);

      // var container = document.getElementById("container");
      myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);





  //   var chart = anychart.graph(new_data);
  // // set the container id
  //   chart.container(cont);
  //   chart.layout().iterationCount(1000);
  //   chart.nodes().labels().enabled(true);
  //   chart.nodes().labels().fontSize(10);
  //   chart.nodes().labels().fontWeight(300);

  //   chart.nodes().tooltip().useHtml(true);
  //   chart.nodes().tooltip().format(
  //         "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
  //       );

  //       chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
  //       chart.interactivity().hoverGap(30);  

  //     // chart.legend().useHtml(true);

  //   // initiate drawing the chart
  //   chart.draw();
  //   chart.title("Directory View");



    if(yes_no != "no"){
      if (curr != lev){
        stack.push(lev);
      }
      
    }

    curr = lev;

    console.log(stack);

}

// THE END of First View



// THE Start of Second View

let tree2;
let calls2;

var keys2 = [];

let cur_sup_files2 = [];

let stack2 = [];

// Adding the dropdown

//  Creating tags
for(var i=0; i<tags.length; i++){
  var dd = document.createElement('a');
  // dd.setAttribute('class', 'dropdown-item');
  // dd.setAttribute('id', i);
  // dd.setAttribute('value', "tags[i]");
  // dd.setAttribute('href', '#');

  dd.innerHTML = "<a class=\"dropdown-item\" id= \"_"+i.toString(10)+"\" href=\"#\" onclick='SetTag2(2_"+i+")'>"+ tags[i] +"</a>"

  var menu = document.getElementById('drop2');
  menu.appendChild(dd);
  
}

// Setting the tag
function SetTag2(i){
  
  
  // var new_i = i.substring(1,2);
  // i = toString(i);
  i = i.toString();
  i = i.substr(1);

  i = parseInt(i, 10);
  
  cur_tag = i;
  display_metric();

  document.getElementById('second_tag').innerHTML = tags[i];


  console.log(i)

  tree2 = ulti_tree['body'][i+1];
  calls2 = ulti_dict[i+1];

  keys2 = [];

  cur_sup_files2 = [];
  stack2 = [];

  for (var k in tree2){
    keys2.push(k);
  }

  let curr2 = keys2[0];
  root2 = keys2[0];

  stack2.push(keys2[0]);

  level2(keys2[0],"container2" , "no");

}

// Get calls function
document.getElementById("integ_view").onclick = function() {
  // <a class='row' id="funcDef_added"></a>
  //             <a class='row' id="classes_added"></a>
  //             <a class='row' id="func_added"></a>
  //             <a class='row' id="modules_added"></a>
  //             <a class='row' id="files_added"></a>

  document.getElementById('funcDef_added').style.display = '';
  
  document.getElementById('classes_added').style.display = '';
  
  document.getElementById('func_added').style.display = '';
  
  document.getElementById('modules_added').style.display = '';

  document.getElementById('files_added').style.display = '';

  // Making the actual dict
  var numa = 0;
  var numd = 0;

  var a_ = 0;
  var b_ = 0;
  var c_ = 0;
  var d_ = 0;
  var e_ = 0;
  var f_ = 0;
  var g_ = 0;
  var h_ = 0;
  var i_ = 0;
  var j_ = 0;

  var new_data2 = {'nodes': [], 'edges':[]}


  var completed = [];

//  Got current files in this view
    cur_sup_files2.forEach((file) => {
      console.log(file);
      new_temp = calls2[file];

//  Check if previous version has the same file
      if (calls.hasOwnProperty(file)){
        
              // Get the call graph of previous version
              new_temp2 = calls[file];


              console.log("testing");
              console.log(new_temp);
              // File
              group = file;

// Iterate through the current files call graph
              for (var key in new_temp) {
                console.log(key);
                console.log("hey");
                      if (new_temp.hasOwnProperty(key)){
                        // The graph of current file
                        temp_new_dat = Object.values(new_temp[key]);
                        
                        // Check if the node (.py file) is also present in the previous version of call graphs
                                    if (new_temp2.hasOwnProperty(key)){
                                      // Get the graph of previous vals too.
                                      temp_new_dat2 = Object.values(new_temp2[key]);
                                      
                                      obje = getdiff2(temp_new_dat, temp_new_dat2);

                                      numa = numa + obje[0];
                                      numd = numd + obje[1];

                                      a_ = a_ + obje[2][0];
                                      b_ = b_ + obje[2][1];
                                      c_ = c_ + obje[3][0];
                                      d_ = d_ + obje[3][1];
                                      e_ = e_ + obje[4][0];
                                      f_ = f_ + obje[4][1];
                                      g_ = g_ + obje[5][0];
                                      h_ = h_ + obje[5][1];
                                      i_ = i_ + obje[6][0];
                                      j_ = j_ + obje[6][1];


                                      from = key;
                                      // Adding 'from' node




                                        // var num_green = 0;
                                        // iterate for graph nodes in current node. 
                                            for(var i in temp_new_dat){
                                              from = key;
                                              to = temp_new_dat[i][0];
                                              type_ = temp_new_dat[i][1];
                                              var run = 0;
                                              //  Check if exist in older version.
                                                for(var k in temp_new_dat2){
                                                      tp = temp_new_dat2[k][0];
                                                            if(to == tp){
                                                              // alert("true" + tp);

                                                          if(type_ == "funcDef"){

                                                            temp_node_dir2 = {id: to, group: 'func_Def', normal: {
                                                                    height: 8,
                                                                    fill: '#0e4efa', 
                                                                }, hovered: {
                                                                  height: 10,
                                                                    fill: '#0e4efa'
                                                                }, selected: {
                                                                  height: 12,
                                                                    fill: '#0e4efa'
                                                                }, shape: "square"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Function Definition", 
                                                                      color: "#0e4efa", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                            if(type_ == "ClassDef"){

                                                                temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                                        height: 8,
                                                                        fill: '#920be0',
                                                                    }, hovered: {
                                                                      height: 10,
                                                                        fill: '#920be0'
                                                                    }, selected: {
                                                                      height: 12,
                                                                        fill: '#920be0'
                                                                    }, shape: "circle"}

                                                                    // new_data2['nodes'].push(temp_node_dir2);

                                                                    if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Class Definition", 
                                                                      color: "#920be0", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                                }

                                                            if(type_ == "func"){

                                                            temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                                    height: 6,
                                                                    fill: '#e27979',
                                                                }, hovered: {
                                                                  height: 8,
                                                                    fill: '#e27979'
                                                                }, selected: {
                                                                  height: 10,
                                                                    fill: '#e27979'
                                                                }, shape: "triangle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Function Call", 
                                                                      color: "#e27979", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                            if(type_ == "module"){

                                                              temp_node_dir2 = {id: to, group: 'module', normal: {
                                                                      height: 3,
                                                                      fill: '#e71fc6',
                                                                  }, hovered: {
                                                                    height: 4,
                                                                      fill: '#e71fc6'
                                                                  }, selected: {
                                                                    height: 5,
                                                                      fill: '#e71fc6'
                                                                  }, shape: "square"}

                                                                  // new_data2['nodes'].push(temp_node_dir2);

                                                                  if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Module", 
                                                                      color: "#e71fc6", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                              }

                                                              if(type_ == "file"){

                                                  temp_node_dir2 = {id: to, group: 'file', normal: {
                                                          height: 3,
                                                          fill: '#c1e04d',
                                                      }, hovered: {
                                                        height: 4,
                                                          fill: '#c1e04d'
                                                      }, selected: {
                                                        height: 5,
                                                          fill: '#c1e04d'
                                                      }, shape: "square"}

                                                      // new_data2['nodes'].push(temp_node_dir2);

                                                      if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"File", 
                                                                      color: "#c1e04d", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                  }

                                                          temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                                height: 6,
                                                                fill: '#000',
                                                            }, hovered: {
                                                              height: 8,
                                                                fill: '#000'
                                                            }, selected: {
                                                              height: 10,
                                                                fill: '#000'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir);

                                                            if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5, 
                                                                      color: "#999", shape:"square"});
                                                                    completed.push(from);
                                                                  }

                                                          temp_edge_dir = {'from': from, 'to':to}

                                                          // new_data2['edges'].push(temp_edge_dir);
                                                          new_data2['edges'].push({from: from, 
                                                                            to: to, 
                                                                            //label: input_list[j]["label"],
                                                                            font: {align: "middle"},
                                                                            color: "#7e8565",
                                                                            size: 0.5});

                                                            run = 1;
                                                            break;
                                                            }
                                                    }
                                                      // If doesnt exist in older version color green.
                                                    if(run==0) {



                                                      if(type_ == "funcDef"){

                                                        temp_node_dir2 = {id: to,  group: 'func_Def', normal: {
                                                                height: 8,
                                                                fill: '#0be016',
                                                            }, hovered: {
                                                              height: 10,
                                                                fill: '#0be016'
                                                            }, selected: {
                                                              height: 12,
                                                                fill: '#0be016'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Function Definition", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }


                                                        }

                                                        if(type_ == "ClassDef"){

                                                            temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                                    height: 8,
                                                                    fill: '#0be016',
                                                                }, hovered: {
                                                                  height: 10,
                                                                    fill: '#0be016'
                                                                }, selected: {
                                                                  height: 12,
                                                                    fill: '#0be016'
                                                                }, shape: "circle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);
                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Class Definition", 
                                                                      color: "#0be016", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                        if(type_ == "func"){

                                                        temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                                height: 6,
                                                                fill: '#0be016',
                                                            }, hovered: {
                                                              height: 8,
                                                                fill: '#0be016'
                                                            }, selected: {
                                                              height: 10,
                                                                fill: '#0be016'
                                                            }, shape: "triangle"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Function Call", 
                                                                      color: "#0be016", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                        }

                                                        if(type_ == "module"){

                                                          temp_node_dir2 = {id: to, group: 'module', normal: {
                                                                  height: 3,
                                                                  fill: '#0be016',
                                                              }, hovered: {
                                                                height: 4,
                                                                  fill: '#0be016'
                                                              }, selected: {
                                                                height: 5,
                                                                  fill: '#0be016'
                                                              }, shape: "square"}

                                                              // new_data2['nodes'].push(temp_node_dir2);

                                                              if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Module", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                          }

                                                          if(type_ == "file"){

                                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                                            height: 3,
                                                            fill: '#0be016',
                                                            }, hovered: {
                                                            height: 4,
                                                            fill: '#0be016'
                                                            }, selected: {
                                                            height: 5,
                                                            fill: '#0be016'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"File", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                        }

                                                        temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                              height: 6,
                                                              fill: '#000',
                                                          }, hovered: {
                                                            height: 8,
                                                              fill: '#000'
                                                          }, selected: {
                                                            height: 10,
                                                              fill: '#000'
                                                          }, shape: "square"}

                                                          // new_data2['nodes'].push(temp_node_dir);

                                                          if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5,
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(from);
                                                                  }


                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        // new_data2['edges'].push(temp_edge_dir);
                                                        new_data2['edges'].push({from: from, 
                                                          to: to, 
                                                          //label: input_list[j]["label"],
                                                          font: {align: "middle"},
                                                          color: "#7e8565",
                                                          size: 0.5});

                                                    }
                                                   

                                            }

                                            // alert(num_green);


                                            // Iterate through older nodes.
                                          // var num_red = 0;
                                        for(var k in temp_new_dat2){
                                            from = key;
                                              to = temp_new_dat2[k][0];
                                              type_ = temp_new_dat2[k][1];
                                              run = 0;
                                              //  Iterate through current nodes.
                                              for(var i in temp_new_dat){
                                                tp = temp_new_dat[i][0];
                                                if (tp == to){
                                                  run = 1;
                                                  break;
                                                }
                                              }
                                              //  Add red if present in older and not present in current.
                                              if(run == 0){
                                                
                                                
                                                if(type_ == "funcDef"){

                                                        temp_node_dir2 = {id: to,  group: 'func_Def', to, normal: {
                                                                height: 8,
                                                                fill: '#f50a0a',
                                                            }, hovered: {
                                                              height: 10,
                                                                fill: '#f50a0a'
                                                            }, selected: {
                                                              height: 12,
                                                                fill: '#f50a0a'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Function Definition", 
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(to);
                                                                  }


                                                        }

                                                        if(type_ == "ClassDef"){

                                                            temp_node_dir2 = {id: to, normal: {
                                                                    height: 8,
                                                                    fill: '#f50a0a',
                                                                }, hovered: {
                                                                  height: 10,
                                                                    fill: '#f50a0a'
                                                                }, selected: {
                                                                  height: 12,
                                                                    fill: '#f50a0a'
                                                                }, shape: "circle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"class Definition", 
                                                                      color: "#f50a0a", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                        if(type_ == "func"){

                                                        temp_node_dir2 = {id: to, normal: {
                                                                height: 6,
                                                                fill: '#f50a0a',
                                                            }, hovered: {
                                                              height: 8,
                                                                fill: '#f50a0a'
                                                            }, selected: {
                                                              height: 10,
                                                                fill: '#f50a0a'
                                                            }, shape: "triangle"}

                                                            // new_data2['nodes'].push(temp_node_dir2);
                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Function Call", 
                                                                      color: "#f50a0a", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                        }

                                                        if(type_ == "module"){

                                                          temp_node_dir2 = {id: to, normal: {
                                                                  height: 3,
                                                                  fill: '#f50a0a',
                                                              }, hovered: {
                                                                height: 4,
                                                                  fill: '#f50a0a'
                                                              }, selected: {
                                                                height: 5,
                                                                  fill: '#f50a0a'
                                                              }, shape: "square"}

                                                              // new_data2['nodes'].push(temp_node_dir2);
                                                              if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Module", 
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                          }

                                                          if(type_ == "file"){

                                                                  temp_node_dir2 = {id: to, normal: {
                                                                  height: 3,
                                                                  fill: '#f50a0a',
                                                                  }, hovered: {
                                                                  height: 4,
                                                                  fill: '#f50a0a'
                                                                  }, selected: {
                                                                  height: 5,
                                                                  fill: '#f50a0a'
                                                                  }, shape: "square"}

                                                                  // new_data2['nodes'].push(temp_node_dir2);

                                                                  if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"File", 
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                        }

                                                        temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                            height: 6,
                                                            fill: '#000',
                                                        }, hovered: {
                                                          height: 8,
                                                            fill: '#000'
                                                        }, selected: {
                                                          height: 10,
                                                            fill: '#000'
                                                        }, shape: "square"}

                                                        // new_data2['nodes'].push(temp_node_dir);

                                                        if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5,
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(from);
                                                                  }

                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        // new_data2['edges'].push(temp_edge_dir);

                                                        new_data2['edges'].push({from: from, 
                                                          to: to, 
                                                          //label: input_list[j]["label"],
                                                          font: {align: "middle"},
                                                          color: "#7e8565",
                                                          size: 0.5});


                                              }


                                            }
                                            // alert(num_red);

                                    }

                        }
                }
              // If the file doesnt exist in older version.
      }else{
        group = file;    
        for (var key in new_temp) {
                  if (new_temp.hasOwnProperty(key)){
                          temp_new_dat = Object.values(new_temp[key]);

                          numa = numa + temp_new_dat.length;
                          
                          for(ka in temp_new_dat){
                              if(temp_new_dat.hasOwnProperty(ka)){
                                
                                if (temp_new_dat[ka][1] == 'funcDef'){
                                      a_ = a_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'ClassDef'){
                                    c_ = c_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'func'){
                                    e_ = e_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'module'){
                                    g_ = g_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'file'){
                                    i_ = i_ + 1;
                                  }
                              }
                            }


                            from = key;
                            // Adding 'from' node


                            

                                  for(var i in temp_new_dat){
                                    from = key;
                                    to = temp_new_dat[i][0];
                                    type_ = temp_new_dat[i][1];

                                    //  Check if exist in older version.
                                        
                                          // If doesnt exist in older version color green.

                                          if(type_ == "funcDef"){

                                            temp_node_dir2 = {id: to, group: 'func_Def',normal: {
                                                    height: 8,
                                                    fill: '#0be016',
                                                }, hovered: {
                                                  height: 10,
                                                    fill: '#0be016'
                                                }, selected: {
                                                  height: 12,
                                                    fill: '#0be016'
                                                }, shape: "square"}

                                                // new_data2['nodes'].push(temp_node_dir2);

                                                if(completed.indexOf(to) === -1){
                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                      label: to, size: 7, title:"Function Definition", 
                                                      color: "#0be016", shape:"square"});
                                                    completed.push(to);
                                                  }
                                            }

                                            if(type_ == "ClassDef"){

                                                temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                        height: 8,
                                                        fill: '#0be016',
                                                    }, hovered: {
                                                      height: 10,
                                                        fill: '#0be016'
                                                    }, selected: {
                                                      height: 12,
                                                        fill: '#0be016'
                                                    }, shape: "circle"}

                                                    // new_data2['nodes'].push(temp_node_dir2);

                                                    if(completed.indexOf(to) === -1){
                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                      label: to, size: 7, title:"Class Definition", 
                                                      color: "#0be016", shape:"triangle"});
                                                    completed.push(to);
                                                  }
                                                }

                                            if(type_ == "func"){

                                            temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                    height: 6,
                                                    fill: '#0be016',
                                                }, hovered: {
                                                  height: 8,
                                                    fill: '#0be016'
                                                }, selected: {
                                                  height: 10,
                                                    fill: '#0be016'
                                                }, shape: "triangle"}

                                                // new_data2['nodes'].push(temp_node_dir2);

                                                if(completed.indexOf(to) === -1){
                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                      label: to, size: 7, title:"Function Call", 
                                                      color: "#0be016", shape:"triangle"});
                                                    completed.push(to);
                                                  }
                                            }

                                            if(type_ == "module"){

                                              temp_node_dir2 = {id: to, group: 'module', normal: {
                                                      height: 3,
                                                      fill: '#0be016',
                                                  }, hovered: {
                                                    height: 4,
                                                      fill: '#0be016'
                                                  }, selected: {
                                                    height: 5,
                                                      fill: '#0be016'
                                                  }, shape: "square"}

                                                  // new_data2['nodes'].push(temp_node_dir2);

                                                  if(completed.indexOf(to) === -1){
                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                      label: to, size: 7, title:"Module", 
                                                      color: "#0be016", shape:"square"});
                                                    completed.push(to);
                                                  }
                                              }

                                              if(type_ == "file"){

                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                            height: 3,
                                            fill: '#0be016',
                                            }, hovered: {
                                            height: 4,
                                            fill: '#0be016'
                                            }, selected: {
                                            height: 5,
                                            fill: '#0be016'
                                            }, shape: "square"}

                                            // new_data2['nodes'].push(temp_node_dir2);
                                            if(completed.indexOf(to) === -1){
                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                      label: to, size: 7, title:"File", 
                                                      color: "#0be016", shape:"square"});
                                                    completed.push(to);
                                                  }
                                            }

                                            temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                height: 6,
                                                fill: '#000',
                                            }, hovered: {
                                              height: 8,
                                                fill: '#000'
                                            }, selected: {
                                              height: 10,
                                                fill: '#000'
                                            }, shape: "square"}

                                            // new_data2['nodes'].push(temp_node_dir);

                                            if(completed.indexOf(from) === -1){
                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                      label: from, size: 5,
                                                      color: "#999", shape:"square"});
                                                    completed.push(from);
                                                  }

                                            temp_edge_dir = {'from': from, 'to':to}
                                            // new_data2['edges'].push(temp_edge_dir);

                                            new_data2['edges'].push({from: from, 
                                                  to: to, 
                                                  //label: input_list[j]["label"],
                                                  font: {align: "middle"},
                                                  color: "#7e8565",
                                                  size: 0.5});


                                  }


                        }
                }
              
        
      }


        });



        console.log("testing2")
        console.log(new_data2);


        set_diff(numa, numd);
        set_diff_ult(a_, b_, c_, d_, e_, f_, g_, h_, i_, j_);
        const myNode2 = document.getElementById("container2");
        myNode2.innerHTML = '';

        var nodes = new vis.DataSet(new_data2['nodes']);
    var edges = new vis.DataSet(new_data2['edges']);



      // console.log("testing2")
      // console.log(new_data);

      // const myNode2 = document.getElementById(cont);

      // // var container = document.getElementById("container");
      // myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);
        

      //   var chart = anychart.graph(new_data2);
      // // set the container id
      //   chart.container("container2");
      //   chart.layout().iterationCount(2000);
      //   // chart.nodes().labels().enabled(true);
      //   // chart.nodes().labels().fontSize(10);
      //   // chart.nodes().labels().fontWeight(300);
      //   // initiate drawing the chart
      //   chart.nodes().tooltip().useHtml(true);
      //   chart.nodes().tooltip().format(
      //     "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
      //   );

      //   chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
      //   chart.interactivity().hoverGap(30);    
      //   chart.draw();
      //   chart.title("Integrated View");


}

// Back functiom
document.getElementById("back2").onclick = function() {
    
            prev_lev = stack2.pop();

            if(prev_lev != root2){
                level2(stack2.pop(), "container2");
            }else{
              stack2.push(prev_lev);
            }
            // if (prev_lev!=undefined){
            //   level(prev_lev);
            //   curr = prev_lev;
            // }   
    }

// Adding the directory to view
function add_directory_to_view2(dir_name){
        var element = document.createElement("input");
        element.type = "button";
        element.setAttribute("class", "btn btn-info");
        // element.setAttribute("id", dir_name);
        element.setAttribute("value", dir_name);
        element.onclick = function () { level2(dir_name, "container2"); };
        
        var foo = document.getElementById("menu2");
        foo.appendChild(element);
        var element = document.createElement("br");
        foo.appendChild(element);
        foo.appendChild(element);
    }

function clear_data2(){
  const myNode = document.getElementById("menu2");
  myNode.innerHTML = '';

  const myNode2 = document.getElementById("container2");
  myNode2.innerHTML = '';
}

function level2(lev, cont, yes_no){

  cur_sup_files2 = [];


  clear_data2();

    console.log(lev);
    var new_data2 = {'nodes': [], 'edges':[]}

    var completed = [];
    
    temp = tree2[lev];
    temp2 = tree[lev];

    obje = getdiff(temp, temp2);
    set_diff(obje[0], obje[1]);

    console.log(temp2);
    console.log(temp);


    temp_node_dir = {id: lev, group:'root directory', normal: {
                fill: '#cea70a',
                height: 30
            }, hovered: {
                fill: '#cea70a',
                height: 40
            }, selected: {
                fill: '#cea70a',
                height: 40
            }}

            // new_data2['nodes'].push(temp_node_dir);

            if(completed.indexOf(lev) === -1){
              new_data2['nodes'].push({id: lev, physics:false, label: lev, 
                size: 5, title:"Root directory", color: "#cea70a", 
                shape:"triangle"});
              completed.push(lev);
            }

            add_directory_to_view2(lev);


    // for(var k in temp){
    
    
  // }

  let runn = 1;

  for(var kk in temp2){
    for(var k in temp){
      if (temp[k]['value'] == temp2[kk]['value']){
          runn = 0;
          break;
      }
    }

    if (runn==0){
      runn = 1;
      continue;
    }
    if (temp2[kk]['type'] == 'dir'){

    temp_node_dir = {id: temp2[kk]['value'], group:'directory', normal: {
          height: 20,
          fill: '#f50a0a',
      }, hovered: {
        height: 30,
          fill: '#f50a0a'
      }, selected: {
        height: 40,
          fill: '#f50a0a'
      }}

        // new_data2['nodes'].push(temp_node_dir);

        if(completed.indexOf(temp2[kk]['value']) === -1){
              new_data2['nodes'].push({id: temp2[kk]['value'], physics:false, 
              label: temp2[kk]['value'], 
                size: 7, title:"Root directory", 
                color: "#f50a0a", 
                shape:"triangle"});
              completed.push(temp2[kk]['value']);
            }
        // add_directory_to_view2(temp2[kk]['value']);

        console.log('Directory');
        temp_edge_dir3 = {'from': lev, 'to':temp2[kk]['value']}

        new_data2['edges'].push({from: lev, 
													to: temp2[kk]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});
                          
        // new_data2['edges'].push(temp_edge_dir3);   

      }else if (temp2[kk]['type'] == 'file'){

      var res = temp2[kk]['value'].split(".");

      var king = res[res.length-1];

          if (king=='py'){

            cur_sup_files2.push(temp2[kk]['value']);
            
            temp_node_dir4 = {id: temp2[kk]['value'], group:'python_File(.py)', normal: {
                              fill: '#f50a0a',
                              height: 20
                          }, hovered: {
                              fill: '#f50a0a',
                              height: 30
                          }, selected: {
                              fill: '#f50a0a',
                              height: 40
                          }, shape: "diamond"}

              // new_data2['nodes'].push(temp_node_dir4);

              if(completed.indexOf(temp2[kk]['value']) === -1){
                new_data2['nodes'].push({id: temp2[kk]['value'], physics:false, 
                label: temp2[kk]['value'], 
                  size: 7, title:"Python File", 
                  color: "#f50a0a", 
                  shape:"triangle"});
                completed.push(temp2[kk]['value']);
            }

              console.log('File');
              temp_edge_dir2 = {'from': lev, 'to':temp2[kk]['value']}
              // new_data2['edges'].push(temp_edge_dir2);

              new_data2['edges'].push({from: lev, 
													to: temp2[kk]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});
          }else{
            temp_node_dir4 = {id: temp2[kk]['value'],group:'file', normal: {
              fill: '#f50a0a',
                            height: 10
                        }, hovered: {
                            fill: '#f50a0a',
                            height: 15
                        }, selected: {
                            fill: '#f50a0a',
                            height: 20
                        }, shape: "square"} 

              // new_data2['nodes'].push(temp_node_dir4);

              if(completed.indexOf(temp2[kk]['value']) === -1){
                new_data2['nodes'].push({id: temp2[kk]['value'], physics:false, 
                label: temp2[kk]['value'], 
                  size: 7, title:"File", 
                  color: "#f50a0a", 
                  shape:"triangle"});
                completed.push(temp2[kk]['value']);
            }

              console.log('File');
              // temp_edge_dir2 = {'from': lev, 'to':temp2[kk]['value']}
              // new_data2['edges'].push(temp_edge_dir2);
              
              new_data2['edges'].push({from: lev, 
													to: temp2[kk]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});

          }
              
          
      
    }
  }



  var run = 1;
  for(var k in temp){
    for(var kk in temp2){
      if (temp[k]['value'] == temp2[kk]['value']){
        if (temp[k]['type'] == 'dir'){
          
        temp_node_dir = {id: temp[k]['value'], group:'directory', normal: {
              height: 20,
              fill: '#794a04',
          }, hovered: {
            height: 30,
              fill: '#794a04'
          }, selected: {
            height: 40,
              fill: '#794a04'
          }}

          // new_data2['nodes'].push(temp_node_dir);

          if(completed.indexOf(temp[k]['value']) === -1){
                new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                label: temp[k]['value'], 
                  size: 5, title:"Directory", 
                  color: "#794a04", 
                  shape:"triangle"});
                completed.push(temp[k]['value']);
            }

          add_directory_to_view2(temp[k]['value']);

          console.log('Directory');
          temp_edge_dir3 = {'from': lev, 'to':temp[k]['value']}
          // new_data2['edges'].push(temp_edge_dir3);   

          new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});

        }else if (temp[k]['type'] == 'file'){

        var res = temp[k]['value'].split(".");

        var king = res[res.length-1];

            if (king=='py'){

              cur_sup_files2.push(temp[k]['value']);
              
              temp_node_dir4 = {id: temp[k]['value'], group:'python_File(.py)',normal: {
                                fill: '#0099ff',
                                height: 20
                            }, hovered: {
                                fill: '#0099ff',
                                height: 30
                            }, selected: {
                                fill: '#0099ff',
                                height: 40
                            }, shape: "diamond"}

                // new_data2['nodes'].push(temp_node_dir4);

              if(completed.indexOf(temp[k]['value']) === -1){
                new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                label: temp[k]['value'], 
                  size: 5, title:"Python File", 
                  color: "#0099ff", 
                  shape:"diamond"});
                completed.push(temp[k]['value']);
            }

                console.log('File');
                temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}
                // new_data2['edges'].push(temp_edge_dir2);

                new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});
            }else{
              temp_node_dir4 = {id: temp[k]['value'], group:'file', normal: {
                fill: '#c1e04d',
                            height: 10
                        }, hovered: {
                            fill: '#c1e04d',
                            height: 15
                        }, selected: {
                            fill: '#c1e04d',
                            height: 20
                        }, shape: "square"} 

                // new_data2['nodes'].push(temp_node_dir4);

              if(completed.indexOf(temp[k]['value']) === -1){
                new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                label: temp[k]['value'], 
                  size: 5, title:"File", 
                  color: "#c1e04d", 
                  shape:"square"});
                completed.push(temp[k]['value']);
            }

                console.log('File');
                temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}
                // new_data2['edges'].push(temp_edge_dir2);

                new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});
            }
            
                    
            
        }
        run = 0;
        break;
        
      }
    }

    if (run == 0){
      run = 1;
      continue;
    }


if (temp[k]['type'] == 'dir'){

        temp_node_dir = {id: temp[k]['value'], group:'directory', normal: {
              height: 20,
              fill: '#0be016',
          }, hovered: {
            height: 30,
              fill: '#0be016'
          }, selected: {
            height: 40,
              fill: '#0be016'
          }}

          // new_data2['nodes'].push(temp_node_dir);

          if(completed.indexOf(temp[k]['value']) === -1){
                new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                label: temp[k]['value'], 
                  size: 7, title:"Directory", 
                  color: "#0be016", 
                  shape:"triangle"});
                completed.push(temp[k]['value']);
            }

          add_directory_to_view2(temp[k]['value']);

          console.log('Directory');
          temp_edge_dir3 = {'from': lev, 'to':temp[k]['value']}
          // new_data2['edges'].push(temp_edge_dir3);   
          new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});

        }else if (temp[k]['type'] == 'file'){

        var res = temp[k]['value'].split(".");

        var king = res[res.length-1];

            if (king=='py'){

              cur_sup_files2.push(temp[k]['value']);
              
              temp_node_dir4 = {id: temp[k]['value'], group:'python_File(.py)', normal: {
                                fill: '#0be016',
                                height: 20
                            }, hovered: {
                                fill: '#0be016',
                                height: 30
                            }, selected: {
                                fill: '#0be016',
                                height: 40
                            }, shape: "diamond"}

                // new_data2['nodes'].push(temp_node_dir4);

                if(completed.indexOf(temp[k]['value']) === -1){
                  new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                  label: temp[k]['value'], 
                    size: 7, title:"Python File", 
                    color: "#0be016", 
                    shape:"diamond"});
                  completed.push(temp[k]['value']);
            }

                console.log('File');
                temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}
                // new_data2['edges'].push(temp_edge_dir2);

                new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});
            }else{
              temp_node_dir4 = {id: temp[k]['value'], group:'file', normal: {
                          fill: '#0be016',
                            height: 10
                        }, hovered: {
                            fill: '#0be016',
                            height: 15
                        }, selected: {
                            fill: '#0be016',
                            height: 20
                        }, shape: "square"} 

                // new_data2['nodes'].push(temp_node_dir4);

                if(completed.indexOf(temp[k]['value']) === -1){
                  new_data2['nodes'].push({id: temp[k]['value'], physics:false, 
                  label: temp[k]['value'], 
                    size: 7, title:"File", 
                    color: "#0be016", 
                    shape:"square"});
                  completed.push(temp[k]['value']);
            }

                console.log('File');
                temp_edge_dir2 = {'from': lev, 'to':temp[k]['value']}
                // new_data2['edges'].push(temp_edge_dir2);
                new_data2['edges'].push({from: lev, 
													to: temp[k]['value'], 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
                          size: 0.5});

            }
                    
            
        }







    

  }

  // return new_data;

  var nodes = new vis.DataSet(new_data2['nodes']);
    var edges = new vis.DataSet(new_data2['edges']);



      // console.log("testing2")
      // console.log(new_data);

      const myNode2 = document.getElementById(cont);

      // var container = document.getElementById("container");
      myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);

  //   var chart = anychart.graph(new_data2);
  // // set the container id
  //   chart.container(cont);
  //   chart.layout().iterationCount(1000);
  //   chart.nodes().labels().enabled(true);
  //   chart.nodes().labels().fontSize(10);
  //   chart.nodes().labels().fontWeight(300);


  //   chart.nodes().tooltip().useHtml(true);
  //   chart.nodes().tooltip().format(
  //         "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
  //       );

  //       chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
  //       chart.interactivity().hoverGap(30);   
        


  //   // initiate drawing the chart
  //   chart.draw();
  //   chart.title("Directory View");



    if(yes_no != "no"){
      if (curr2 != lev){
        stack2.push(lev);
      }
      
    }

    curr2 = lev;

    // console.log(stack2);

}


document.getElementById('dir_view').onclick = function() {
  
  document.getElementById('funcDef_added').style.display = 'none';
  
  document.getElementById('classes_added').style.display = 'none';
  
  document.getElementById('func_added').style.display = 'none';
  
  document.getElementById('modules_added').style.display = 'none';

  document.getElementById('files_added').style.display = 'none';


  prev_lev = stack2.pop();
  // alert(prev_lev);
  stack2.push(prev_lev);
  level2(prev_lev, "container2" , "no");
}

document.getElementById('collab_view').onclick = function() {

  document.getElementById('funcDef_added').style.display = 'none';
  
  document.getElementById('classes_added').style.display = '';
  
  document.getElementById('func_added').style.display = 'none';
  
  document.getElementById('modules_added').style.display = '';

  document.getElementById('files_added').style.display = '';

  var new_data2 = {'nodes': [], 'edges':[]}

  var completed = [];

  var numa = 0;
  var numd = 0;

  var a_ = 0;
  var b_ = 0;
  var c_ = 0;
  var d_ = 0;
  var e_ = 0;
  var f_ = 0;
  var g_ = 0;
  var h_ = 0;
  var i_ = 0;
  var j_ = 0;

//  Got current files in this view
    cur_sup_files2.forEach((file) => {
      console.log(file);
      new_temp = calls2[file];

//  Check if previous version has the same file
      if (calls.hasOwnProperty(file)){
        
              // Get the call graph of previous version
              new_temp2 = calls[file];


              console.log("testing");
              console.log(new_temp);
              // File
              group = file;

// Iterate through the current files call graph
              for (var key in new_temp) {
                console.log(key);
                console.log("hey");
                      if (new_temp.hasOwnProperty(key)){
                        // The graph of current file
                        temp_new_dat = Object.values(new_temp[key]);
                        
                        // Check if the node (.py file) is also present in the previous version of call graphs
                                    if (new_temp2.hasOwnProperty(key)){
                                      // Get the graph of previous vals too.
                                      temp_new_dat2 = Object.values(new_temp2[key]);

                                      obje = getdiff2(temp_new_dat, temp_new_dat2);

                                      numa = numa + obje[0];
                                      numd = numd + obje[1];

                                      a_ = a_ + obje[2][0];
                                      b_ = b_ + obje[2][1];
                                      c_ = c_ + obje[3][0];
                                      d_ = d_ + obje[3][1];
                                      e_ = e_ + obje[4][0];
                                      f_ = f_ + obje[4][1];
                                      g_ = g_ + obje[5][0];
                                      h_ = h_ + obje[5][1];
                                      i_ = i_ + obje[6][0];
                                      j_ = j_ + obje[6][1];

                                      from = key;
                                      // Adding 'from' node
                                      



                                        // var num_green = 0;
                                        // iterate for graph nodes in current node. 
                                            for(var i in temp_new_dat){
                                              from = key;
                                              to = temp_new_dat[i][0];
                                              type_ = temp_new_dat[i][1];
                                              var run = 0;
                                              //  Check if exist in older version.
                                                for(var k in temp_new_dat2){
                                                      tp = temp_new_dat2[k][0];
                                                            if(to == tp){
                                                              // alert("true" + tp);

                                                          
                                                            if(type_ == "ClassDef"){

                                                                temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                                        height: 8,
                                                                        fill: '#920be0',
                                                                    }, hovered: {
                                                                      height: 10,
                                                                        fill: '#920be0'
                                                                    }, selected: {
                                                                      height: 12,
                                                                        fill: '#920be0'
                                                                    }, shape: "circle"}

                                                                    // new_data2['nodes'].push(temp_node_dir2);

                                                                    if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Class Definition", 
                                                                      color: "#920be0", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                                }

                                                            // if(type_ == "func"){

                                                            // temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                            //         height: 6,
                                                            //         fill: '#76D7C4',
                                                            //     }, hovered: {
                                                            //       height: 8,
                                                            //         fill: '#76D7C4'
                                                            //     }, selected: {
                                                            //       height: 10,
                                                            //         fill: '#76D7C4'
                                                            //     }, shape: "square"}

                                                            //     new_data2['nodes'].push(temp_node_dir2);
                                                            // }

                                                            if(type_ == "module"){

                                                              temp_node_dir2 = {id: to, group: 'module', normal: {
                                                                      height: 3,
                                                                      fill: '#e71fc6',
                                                                  }, hovered: {
                                                                    height: 4,
                                                                      fill: '#e71fc6'
                                                                  }, selected: {
                                                                    height: 5,
                                                                      fill: '#e71fc6'
                                                                  }, shape: "square"}

                                                                  // new_data2['nodes'].push(temp_node_dir2);

                                                                  if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"Module", 
                                                                      color: "#e71fc6", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                              }

                                                              if(type_ == "file"){

                                                  temp_node_dir2 = {id: to, group: 'file', normal: {
                                                          height: 3,
                                                          fill: '#c1e04d',
                                                      }, hovered: {
                                                        height: 4,
                                                          fill: '#c1e04d'
                                                      }, selected: {
                                                        height: 5,
                                                          fill: '#c1e04d'
                                                      }, shape: "square"}

                                                      // new_data2['nodes'].push(temp_node_dir2);

                                                      if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 5, title:"File", 
                                                                      color: "#c1e04d", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                  }



                                                  temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5,
                                                                      color: "#999", shape:"square"});
                                                                    completed.push(from);
                                                                  }


                                                          temp_edge_dir = {'from': from, 'to':to}
                                                          // new_data2['edges'].push(temp_edge_dir);

                                                          new_data2['edges'].push({from: from, 
                                                            to: to, 
                                                            //label: input_list[j]["label"],
                                                            font: {align: "middle"},
                                                            color: "#7e8565",
                                                            size: 0.5});


                                                            run = 1;
                                                            break;
                                                            }
                                                    }
                                                      // If doesnt exist in older version color green.
                                                    if(run==0) {



                                                      // if(type_ == "funcDef"){

                                                      //   temp_node_dir2 = {id: to, group: 'func_Def', normal: {
                                                      //           height: 8,
                                                      //           fill: '#2ECC71',
                                                      //       }, hovered: {
                                                      //         height: 10,
                                                      //           fill: '#2ECC71'
                                                      //       }, selected: {
                                                      //         height: 12,
                                                      //           fill: '#2ECC71'
                                                      //       }, shape: "square"}

                                                      //       new_data2['nodes'].push(temp_node_dir2);
                                                      //   }

                                                        if(type_ == "ClassDef"){

                                                            temp_node_dir2 = {id: to,group: 'class_Def', normal: {
                                                                    height: 8,
                                                                    fill: '#0be016',
                                                                }, hovered: {
                                                                  height: 10,
                                                                    fill: '#0be016'
                                                                }, selected: {
                                                                  height: 12,
                                                                    fill: '#0be016'
                                                                }, shape: "circle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Class Definition", 
                                                                      color: "#0be016", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                        // if(type_ == "func"){

                                                        // temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                        //         height: 6,
                                                        //         fill: '#2ECC71',
                                                        //     }, hovered: {
                                                        //       height: 8,
                                                        //         fill: '#2ECC71'
                                                        //     }, selected: {
                                                        //       height: 10,
                                                        //         fill: '#2ECC71'
                                                        //     }, shape: "square"}

                                                        //     new_data2['nodes'].push(temp_node_dir2);
                                                        // }

                                                        if(type_ == "module"){

                                                          temp_node_dir2 = {id: to, group: 'module', normal: {
                                                                  height: 3,
                                                                  fill: '#0be016',
                                                              }, hovered: {
                                                                height: 4,
                                                                  fill: '#0be016'
                                                              }, selected: {
                                                                height: 5,
                                                                  fill: '#0be016'
                                                              }, shape: "square"}

                                                              // new_data2['nodes'].push(temp_node_dir2);

                                                              if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Module", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                          }

                                                          if(type_ == "file"){

                                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                                            height: 3,
                                                            fill: '#0be016',
                                                            }, hovered: {
                                                            height: 4,
                                                            fill: '#0be016'
                                                            }, selected: {
                                                            height: 5,
                                                            fill: '#0be016'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"File", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                        }



                                                        temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                              height: 6,
                                                              fill: '#000',
                                                          }, hovered: {
                                                            height: 8,
                                                              fill: '#000'
                                                          }, selected: {
                                                            height: 10,
                                                              fill: '#000'
                                                          }, shape: "square"}

                                                          // new_data2['nodes'].push(temp_node_dir);

                                                          if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5,
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(from);
                                                                  }


                                                        


                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        // new_data2['edges'].push(temp_edge_dir);

                                                        new_data2['edges'].push({from: from, 
                                                            to: to, 
                                                            //label: input_list[j]["label"],
                                                            font: {align: "middle"},
                                                            color: "#7e8565",
                                                            size: 0.5});
                                                    }
                                                   

                                            }

                                            // alert(num_green);


                                            // Iterate through older nodes.
                                          // var num_red = 0;
                                          for(var k in temp_new_dat2){
                                              from = key;
                                              to = temp_new_dat2[k][0];
                                              type_ = temp_new_dat2[k][1];
                                              run = 0;
                                              //  Iterate through current nodes.
                                              for(var i in temp_new_dat){
                                                tp = temp_new_dat[i][0];
                                                if (tp == to){
                                                  run = 1;
                                                  break;
                                                }
                                              }
                                              //  Add red if present in older and not present in current.
                                              if(run == 0){
                                                
                                                
                                                // if(type_ == "funcDef"){

                                                //         temp_node_dir2 = {id: to, normal: {
                                                //                 height: 8,
                                                //                 fill: '#FF0000',
                                                //             }, hovered: {
                                                //               height: 10,
                                                //                 fill: '#FF0000'
                                                //             }, selected: {
                                                //               height: 12,
                                                //                 fill: '#FF0000'
                                                //             }, shape: "square"}

                                                //             new_data2['nodes'].push(temp_node_dir2);
                                                //         }

                                                        if(type_ == "ClassDef"){

                                                            temp_node_dir2 = {id: to, normal: {
                                                                    height: 8,
                                                                    fill: '#f50a0a',
                                                                }, hovered: {
                                                                  height: 10,
                                                                    fill: '#f50a0a'
                                                                }, selected: {
                                                                  height: 12,
                                                                    fill: '#f50a0a'
                                                                }, shape: "circle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Class Definition", 
                                                                      color: "#f50a0a", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                            }

                                                        // if(type_ == "func"){

                                                        // temp_node_dir2 = {id: to, normal: {
                                                        //         height: 6,
                                                        //         fill: '#FF0000',
                                                        //     }, hovered: {
                                                        //       height: 8,
                                                        //         fill: '#FF0000'
                                                        //     }, selected: {
                                                        //       height: 10,
                                                        //         fill: '#FF0000'
                                                        //     }, shape: "square"}

                                                        //     new_data2['nodes'].push(temp_node_dir2);
                                                        // }

                                                        if(type_ == "module"){

                                                          temp_node_dir2 = {id: to, normal: {
                                                                  height: 3,
                                                                  fill: '#f50a0a',
                                                              }, hovered: {
                                                                height: 4,
                                                                  fill: '#f50a0a'
                                                              }, selected: {
                                                                height: 5,
                                                                  fill: '#f50a0a'
                                                              }, shape: "square"}

                                                              // new_data2['nodes'].push(temp_node_dir2);

                                                              if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Module", 
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                          }

                                                          if(type_ == "file"){

                                                        temp_node_dir2 = {id: to, normal: {
                                                        height: 3,
                                                        fill: '#f50a0a',
                                                        }, hovered: {
                                                        height: 4,
                                                        fill: '#f50a0a'
                                                        }, selected: {
                                                        height: 5,
                                                        fill: '#f50a0a'
                                                        }, shape: "square"}

                                                        // new_data2['nodes'].push(temp_node_dir2);

                                                        if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"File", 
                                                                      color: "#f50a0a", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                                        }


                                                        temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                              height: 6,
                                                              fill: '#000',
                                                          }, hovered: {
                                                            height: 8,
                                                              fill: '#000'
                                                          }, selected: {
                                                            height: 10,
                                                              fill: '#000'
                                                          }, shape: "square"}

                                                          // new_data2['nodes'].push(temp_node_dir);
                                                          
                                                          if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5, 
                                                                      color: "#999", shape:"square"});
                                                                    completed.push(from);
                                                                  }


                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        // new_data2['edges'].push(temp_edge_dir);

                                                        new_data2['edges'].push({from: from, 
                                                            to: to, 
                                                            //label: input_list[j]["label"],
                                                            font: {align: "middle"},
                                                            color: "#7e8565",
                                                            size: 0.5});


                                              }


                                            }
                                            // alert(num_red);

                                    }

                        }
                }
              // If the file doesnt exist in older version.
      }else{
        group = file;    
        for (var key in new_temp) {
                  if (new_temp.hasOwnProperty(key)){
                          temp_new_dat = Object.values(new_temp[key]);

                          numa = numa + temp_new_dat.length;
                          
                          for(ka in temp_new_dat){
                              if(temp_new_dat.hasOwnProperty(ka)){
                                
                                if (temp_new_dat[ka][1] == 'funcDef'){
                                      a_ = a_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'ClassDef'){
                                    c_ = c_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'func'){
                                    e_ = e_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'module'){
                                    g_ = g_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'file'){
                                    i_ = i_ + 1;
                                  }
                              }
                            }
                      
                            from = key;
                            // Adding 'from' node
                            



                                  for(var i in temp_new_dat){
                                    from = key;
                                    to = temp_new_dat[i][0];
                                    type_ = temp_new_dat[i][1];

                                    //  Check if exist in older version.
                                        
                                          // If doesnt exist in older version color green.

                                          // if(type_ == "funcDef"){

                                          //   temp_node_dir2 = {id: to, group: 'func_Def',normal: {
                                          //           height: 8,
                                          //           fill: '#2ECC71',
                                          //       }, hovered: {
                                          //         height: 10,
                                          //           fill: '#2ECC71'
                                          //       }, selected: {
                                          //         height: 12,
                                          //           fill: '#2ECC71'
                                          //       }, shape: "square"}

                                          //       new_data2['nodes'].push(temp_node_dir2);
                                          //   }

                                            if(type_ == "ClassDef"){

                                                temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                        height: 8,
                                                        fill: '#0be016',
                                                    }, hovered: {
                                                      height: 10,
                                                        fill: '#0be016'
                                                    }, selected: {
                                                      height: 12,
                                                        fill: '#0be016'
                                                    }, shape: "circle"}

                                                    // new_data2['nodes'].push(temp_node_dir2);

                                                    if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Class Definition", 
                                                                      color: "#0be016", shape:"triangle"});
                                                                    completed.push(to);
                                                                  }
                                                }

                                            // if(type_ == "func"){

                                            // temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                            //         height: 6,
                                            //         fill: '#2ECC71',
                                            //     }, hovered: {
                                            //       height: 8,
                                            //         fill: '#2ECC71'
                                            //     }, selected: {
                                            //       height: 10,
                                            //         fill: '#2ECC71'
                                            //     }, shape: "square"}

                                            //     new_data2['nodes'].push(temp_node_dir2);
                                            // }

                                            if(type_ == "module"){

                                              temp_node_dir2 = {id: to, group: 'module', normal: {
                                                      height: 3,
                                                      fill: '#0be016',
                                                  }, hovered: {
                                                    height: 4,
                                                      fill: '#0be016'
                                                  }, selected: {
                                                    height: 5,
                                                      fill: '#0be016'
                                                  }, shape: "square"}

                                                  // new_data2['nodes'].push(temp_node_dir2);

                                                  if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"Module", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                              }

                                              if(type_ == "file"){

                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                            height: 3,
                                            fill: '#0be016',
                                            }, hovered: {
                                            height: 4,
                                            fill: '#0be016'
                                            }, selected: {
                                            height: 5,
                                            fill: '#0be016'
                                            }, shape: "square"}

                                            // new_data2['nodes'].push(temp_node_dir2);

                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, 
                                                                      label: to, size: 7, title:"File", 
                                                                      color: "#0be016", shape:"square"});
                                                                    completed.push(to);
                                                                  }
                                            }


                                            temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, 
                                                                      label: from, size: 5, 
                                                                      color: "#999", shape:"square"});
                                                                    completed.push(from);
                                                                  }


                                            temp_edge_dir = {'from': from, 'to':to}
                                            // new_data2['edges'].push(temp_edge_dir);

                                            new_data2['edges'].push({from: from, 
                                                                            to: to, 
                                                                            //label: input_list[j]["label"],
                                                                            font: {align: "middle"},
                                                                            color: "#7e8565",
                                                                            size: 0.5});


                                  }


                        }
                }
              
        
      }


        });

        console.log("testing2")
        console.log(new_data2);

        set_diff(numa, numd);
        set_diff_ult(a_, b_, c_, d_, e_, f_, g_, h_, i_, j_);

        const myNode2 = document.getElementById("container2");
        myNode2.innerHTML = '';


        var nodes = new vis.DataSet(new_data2['nodes']);
    var edges = new vis.DataSet(new_data2['edges']);



      // console.log("testing2")
      // console.log(new_data);

      // const myNode2 = document.getElementById(cont);

      // // var container = document.getElementById("container");
      // myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);
        

      //   var chart = anychart.graph(new_data2);
      // // set the container id
      //   chart.container("container2");
      //   chart.layout().iterationCount(2000);
      //   // chart.nodes().labels().enabled(true);
      //   // chart.nodes().labels().fontSize(10);
      //   // chart.nodes().labels().fontWeight(300);
      //   // initiate drawing the chart
      //   chart.nodes().tooltip().useHtml(true);
      //   chart.nodes().tooltip().format(
      //     "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
      //   );

      //   chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
      //   chart.interactivity().hoverGap(30);    
      //   chart.draw();
      //   chart.title("Collaboration Graph View");
  

}

document.getElementById('call_view').onclick = function() {
  
  document.getElementById('funcDef_added').style.display = '';
  
  document.getElementById('classes_added').style.display = 'none';
  
  document.getElementById('func_added').style.display = '';
  
  document.getElementById('modules_added').style.display = 'none';

  document.getElementById('files_added').style.display = '';

  var new_data2 = {'nodes': [], 'edges':[]}

  var completed = [];

  var numa = 0;
  var numd = 0;

  var a_ = 0;
  var b_ = 0;
  var c_ = 0;
  var d_ = 0;
  var e_ = 0;
  var f_ = 0;
  var g_ = 0;
  var h_ = 0;
  var i_ = 0;
  var j_ = 0;

//  Got current files in this view
    cur_sup_files2.forEach((file) => {
      console.log(file);
      new_temp = calls2[file];

//  Check if previous version has the same file
      if (calls.hasOwnProperty(file)){
        
              // Get the call graph of previous version
              new_temp2 = calls[file];


              console.log("testing");
              console.log(new_temp);
              // File
              group = file;

// Iterate through the current files call graph
              for (var key in new_temp) {
                console.log(key);
                console.log("hey");
                      if (new_temp.hasOwnProperty(key)){
                        // The graph of current file
                        temp_new_dat = Object.values(new_temp[key]);

                        
                        
                        // Check if the node (.py file) is also present in the previous version of call graphs
                                    if (new_temp2.hasOwnProperty(key)){
                                      // Get the graph of previous vals too.
                                      temp_new_dat2 = Object.values(new_temp2[key]);

                                      obje = getdiff2(temp_new_dat, temp_new_dat2);

                                      numa = numa + obje[0];
                                      numd = numd + obje[1];

                                      a_ = a_ + obje[2][0];
                                      b_ = b_ + obje[2][1];
                                      c_ = c_ + obje[3][0];
                                      d_ = d_ + obje[3][1];
                                      e_ = e_ + obje[4][0];
                                      f_ = f_ + obje[4][1];
                                      g_ = g_ + obje[5][0];
                                      h_ = h_ + obje[5][1];
                                      i_ = i_ + obje[6][0];
                                      j_ = j_ + obje[6][1];

                                      from = key;
                                      // Adding 'from' node
                                      
                                        // var num_green = 0;
                                        // iterate for graph nodes in current node. 
                                            for(var i in temp_new_dat){
                                              from = key;
                                              to = temp_new_dat[i][0];
                                              type_ = temp_new_dat[i][1];
                                              var run = 0;
                                              //  Check if exist in older version.
                                                for(var k in temp_new_dat2){
                                                      tp = temp_new_dat2[k][0];
                                                            if(to == tp){
                                                              // alert("true" + tp);

                                                              if(type_ == "funcDef"){

                                                                    temp_node_dir2 = {id: to, group: 'func_Def', normal: {
                                                                            height: 8,
                                                                            fill: '#0e4efa',
                                                                        }, hovered: {
                                                                          height: 10,
                                                                            fill: '#0e4efa'
                                                                        }, selected: {
                                                                          height: 12,
                                                                            fill: '#0e4efa'
                                                                        }, shape: "square"}

                                                                        // new_data2['nodes'].push(temp_node_dir2);
                                                                        
                                                                        if(completed.indexOf(to) === -1){
                                                                            new_data2['nodes'].push({id: to, physics:false, label: to, size: 5, title:"Function Definition", color: "#0e4efa", shape:"square"});
                                                                            completed.push(to);
                                                                          }

                                                                    }
                                                            // if(type_ == "ClassDef"){

                                                            //     temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                                            //             height: 8,
                                                            //             fill: '#633974',
                                                            //         }, hovered: {
                                                            //           height: 10,
                                                            //             fill: '#633974'
                                                            //         }, selected: {
                                                            //           height: 12,
                                                            //             fill: '#633974'
                                                            //         }, shape: "circle"}

                                                            //         new_data2['nodes'].push(temp_node_dir2);
                                                            //     }

                                                            if(type_ == "func"){

                                                            temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                                    height: 6,
                                                                    fill: '#e27979',
                                                                }, hovered: {
                                                                  height: 8,
                                                                    fill: '#e27979'
                                                                }, selected: {
                                                                  height: 10,
                                                                    fill: '#e27979'
                                                                }, shape: "triangle"}

                                                                // new_data2['nodes'].push(temp_node_dir2);

                                                                if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 5, title:"Function Call", color: "#e27979",
                                                                    shape:"triangle"});
                                                                  completed.push(to);
                                                                }
                                                            }

                                                            // if(type_ == "module"){

                                                            //   temp_node_dir2 = {id: to, group: 'module', normal: {
                                                            //           height: 3,
                                                            //           fill: '#2980B9',
                                                            //       }, hovered: {
                                                            //         height: 4,
                                                            //           fill: '#2980B9'
                                                            //       }, selected: {
                                                            //         height: 5,
                                                            //           fill: '#2980B9'
                                                            //       }, shape: "square"}

                                                            //       new_data2['nodes'].push(temp_node_dir2);
                                                            //   }

                                                              if(type_ == "file"){

                                                  temp_node_dir2 = {id: to, group: 'file', normal: {
                                                          height: 3,
                                                          fill: '#c1e04d',
                                                      }, hovered: {
                                                        height: 4,
                                                          fill: '#c1e04d'
                                                      }, selected: {
                                                        height: 5,
                                                          fill: '#c1e04d'
                                                      }, shape: "square"}

                                                      // new_data2['nodes'].push(temp_node_dir2);

                                                      if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 5, title:"File", color: "#c1e04d",
                                                                    shape:"square"});
                                                                  completed.push(to);
                                                                }
                                                  }

                                                  temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                          new_data2['nodes'].push({id: from, physics:false, label: from,
                                                          size: 5, color: "#999",
                                                          shape:"square"});
                                                        completed.push(from);
                                                      }


                                                          temp_edge_dir = {'from': from, 'to':to}
                                                          new_data2['edges'].push({from: from, 
                                                                                    to: to, 
                                                                                    //label: input_list[j]["label"],
                                                                                    font: {align: "middle"},
                                                                                    color: "#7e8565",
                                                                                    size: 0.5});

                                                            run = 1;
                                                            break;
                                                            }
                                                    }
                                                      // If doesnt exist in older version color green.
                                                    if(run==0) {



                                                      if(type_ == "funcDef"){

                                                        temp_node_dir2 = {id: to, group: 'func_Def', normal: {
                                                                height: 8,
                                                                fill: '#0be016',
                                                            }, hovered: {
                                                              height: 10,
                                                                fill: '#0be016'
                                                            }, selected: {
                                                              height: 12,
                                                                fill: '#0be016'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"Function Definition", color: "#0be016",
                                                                    shape:"square"});
                                                                  completed.push(to);
                                                                }
                                                        }

                                                        // if(type_ == "ClassDef"){

                                                        //     temp_node_dir2 = {id: to,group: 'class_Def', normal: {
                                                        //             height: 8,
                                                        //             fill: '#2ECC71',
                                                        //         }, hovered: {
                                                        //           height: 10,
                                                        //             fill: '#2ECC71'
                                                        //         }, selected: {
                                                        //           height: 12,
                                                        //             fill: '#2ECC71'
                                                        //         }, shape: "circle"}

                                                        //         new_data2['nodes'].push(temp_node_dir2);
                                                        //     }

                                                        if(type_ == "func"){

                                                        temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                                height: 6,
                                                                fill: '#0be016',
                                                            }, hovered: {
                                                              height: 8,
                                                                fill: '#0be016'
                                                            }, selected: {
                                                              height: 10,
                                                                fill: '#0be016'
                                                            }, shape: "triangle"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"Function Call", color: "#0be016",
                                                                    shape:"triangle"});
                                                                  completed.push(to);
                                                                }
                                                        }

                                                        // if(type_ == "module"){

                                                        //   temp_node_dir2 = {id: to, group: 'module', normal: {
                                                        //           height: 3,
                                                        //           fill: '#2ECC71',
                                                        //       }, hovered: {
                                                        //         height: 4,
                                                        //           fill: '#2ECC71'
                                                        //       }, selected: {
                                                        //         height: 5,
                                                        //           fill: '#2ECC71'
                                                        //       }, shape: "square"}

                                                        //       new_data2['nodes'].push(temp_node_dir2);
                                                        //   }

                                                          if(type_ == "file"){

                                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                                            height: 3,
                                                            fill: '#0be016',
                                                            }, hovered: {
                                                            height: 4,
                                                            fill: '#0be016'
                                                            }, selected: {
                                                            height: 5,
                                                            fill: '#0be016'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"File", color: "#0be016",
                                                                    shape:"square"});
                                                                  completed.push(to);
                                                                }
                                                        }


                                                        temp_node_dir = {id: from,  group: 'Indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({from: from, physics:false, label: from,
                                                                    size: 5, color: "#999",
                                                                    shape:"square"});
                                                                  completed.push(from);
                                                                }


                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        new_data2['edges'].push({from: from, 
                                                                                    to: to, 
                                                                                    //label: input_list[j]["label"],
                                                                                    font: {align: "middle"},
                                                                                    color: "#7e8565",
                                                                                    size: 0.5});
                                                    }
                                                   

                                            }

                                            // alert(num_green);


                                            // Iterate through older nodes.
                                          // var num_red = 0;
                                          for(var k in temp_new_dat2){
                                              from = key;
                                              to = temp_new_dat2[k][0];
                                              type_ = temp_new_dat2[k][1];
                                              run = 0;
                                              //  Iterate through current nodes.
                                              for(var i in temp_new_dat){
                                                tp = temp_new_dat[i][0];
                                                if (tp == to){
                                                  run = 1;
                                                  break;
                                                }
                                              }
                                              //  Add red if present in older and not present in current.
                                              if(run == 0){
                                                
                                                
                                                if(type_ == "funcDef"){

                                                        temp_node_dir2 = {id: to, normal: {
                                                                height: 8,
                                                                fill: '#f50a0a',
                                                            }, hovered: {
                                                              height: 10,
                                                                fill: '#f50a0a'
                                                            }, selected: {
                                                              height: 12,
                                                                fill: '#f50a0a'
                                                            }, shape: "square"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"Function Definition", color: "#f50a0a",
                                                                    shape:"square"});
                                                                  completed.push(to);
                                                                }


                                                        }

                                                        // if(type_ == "ClassDef"){

                                                        //     temp_node_dir2 = {id: to, normal: {
                                                        //             height: 8,
                                                        //             fill: '#FF0000',
                                                        //         }, hovered: {
                                                        //           height: 10,
                                                        //             fill: '#FF0000'
                                                        //         }, selected: {
                                                        //           height: 12,
                                                        //             fill: '#FF0000'
                                                        //         }, shape: "circle"}

                                                        //         new_data2['nodes'].push(temp_node_dir2);
                                                        //     }

                                                        if(type_ == "func"){

                                                        temp_node_dir2 = {id: to, normal: {
                                                                height: 6,
                                                                fill: '#f50a0a',
                                                            }, hovered: {
                                                              height: 8,
                                                                fill: '#f50a0a'
                                                            }, selected: {
                                                              height: 10,
                                                                fill: '#f50a0a'
                                                            }, shape: "triangle"}

                                                            // new_data2['nodes'].push(temp_node_dir2);

                                                            if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"Function Call", color: "#f50a0a",
                                                                    shape:"triangle"});
                                                                  completed.push(to);
                                                                }
                                                        }

                                                        // if(type_ == "module"){

                                                        //   temp_node_dir2 = {id: to, normal: {
                                                        //           height: 3,
                                                        //           fill: '#FF0000',
                                                        //       }, hovered: {
                                                        //         height: 4,
                                                        //           fill: '#FF0000'
                                                        //       }, selected: {
                                                        //         height: 5,
                                                        //           fill: '#FF0000'
                                                        //       }, shape: "square"}

                                                        //       new_data2['nodes'].push(temp_node_dir2);
                                                        //   }

                                                          if(type_ == "file"){

                                                        temp_node_dir2 = {id: to, normal: {
                                                        height: 3,
                                                        fill: '#f50a0a',
                                                        }, hovered: {
                                                        height: 4,
                                                        fill: '#f50a0a'
                                                        }, selected: {
                                                        height: 5,
                                                        fill: '#f50a0a'
                                                        }, shape: "square"}

                                                        // new_data2['nodes'].push(temp_node_dir2);
                                                        if(completed.indexOf(to) === -1){
                                                                    new_data2['nodes'].push({id: to, physics:false, label: to,
                                                                    size: 7, title:"File", color: "#f50a0a",
                                                                    shape:"square"});
                                                                  completed.push(to);
                                                                }
                                                        }

                                                        temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                                    new_data2['nodes'].push({id: from, physics:false, label: from,
                                                                    size: 5, color: "#999",
                                                                    shape:"square"});
                                                                  completed.push(from);
                                                                }


                                                        temp_edge_dir = {'from': from, 'to':to}
                                                        new_data2['edges'].push({from: from, 
                                                                                    to: to, 
                                                                                    //label: input_list[j]["label"],
                                                                                    font: {align: "middle"},
                                                                                    color: "#7e8565",
                                                                                    size: 0.5});


                                              }


                                            }
                                            // alert(num_red);

                                    }

                        }
                }
              // If the file doesnt exist in older version.
      }else{
        group = file;    
        for (var key in new_temp) {
                  if (new_temp.hasOwnProperty(key)){
                          temp_new_dat = Object.values(new_temp[key]);

                          numa = numa + temp_new_dat.length;

                          for(ka in temp_new_dat){
                              if(temp_new_dat.hasOwnProperty(ka)){
                                
                                if (temp_new_dat[ka][1] == 'funcDef'){
                                      a_ = a_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'ClassDef'){
                                    c_ = c_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'func'){
                                    e_ = e_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'module'){
                                    g_ = g_ + 1;
                                  }
                                  if (temp_new_dat[ka][1] == 'file'){
                                    i_ = i_ + 1;
                                  }
                              }
                            }

                      
                            from = key;


                                  for(var i in temp_new_dat){
                                    from = key;
                                    to = temp_new_dat[i][0];
                                    type_ = temp_new_dat[i][1];

                                    //  Check if exist in older version.
                                        
                                          // If doesnt exist in older version color green.

                                          if(type_ == "funcDef"){

                                            temp_node_dir2 = {id: to, group: 'func_Def',normal: {
                                                    height: 8,
                                                    fill: '#0be016',
                                                }, hovered: {
                                                  height: 10,
                                                    fill: '#0be016'
                                                }, selected: {
                                                  height: 12,
                                                    fill: '#0be016'
                                                }, shape: "square"}

                                                // new_data2['nodes'].push(temp_node_dir2);

                                                if(completed.indexOf(to) === -1){
                                                          new_data2['nodes'].push({id: to, physics:false, label: to,
                                                          size: 7, title:"Function Definition", color: "#0be016",
                                                          shape:"square"});
                                                        completed.push(to);
                                                      }
                                            }

                                            // if(type_ == "ClassDef"){

                                            //     temp_node_dir2 = {id: to, group: 'class_Def', normal: {
                                            //             height: 8,
                                            //             fill: '#2ECC71',
                                            //         }, hovered: {
                                            //           height: 10,
                                            //             fill: '#2ECC71'
                                            //         }, selected: {
                                            //           height: 12,
                                            //             fill: '#2ECC71'
                                            //         }, shape: "circle"}

                                            //         new_data2['nodes'].push(temp_node_dir2);
                                            //     }

                                            if(type_ == "func"){

                                            temp_node_dir2 = {id: to, group: 'func_Call', normal: {
                                                    height: 6,
                                                    fill: '#0be016',
                                                }, hovered: {
                                                  height: 8,
                                                    fill: '#0be016'
                                                }, selected: {
                                                  height: 10,
                                                    fill: '#0be016'
                                                }, shape: "triangle"}

                                                // new_data2['nodes'].push(temp_node_dir2);

                                                if(completed.indexOf(to) === -1){
                                                          new_data2['nodes'].push({id: to, physics:false, label: to,
                                                          size: 7, title:"Function Call", color: "#0be016",
                                                          shape:"triangle"});
                                                        completed.push(to);
                                                      }
                                            }

                                            // if(type_ == "module"){

                                            //   temp_node_dir2 = {id: to, group: 'module', normal: {
                                            //           height: 3,
                                            //           fill: '#2ECC71',
                                            //       }, hovered: {
                                            //         height: 4,
                                            //           fill: '#2ECC71'
                                            //       }, selected: {
                                            //         height: 5,
                                            //           fill: '#2ECC71'
                                            //       }, shape: "square"}

                                            //       new_data2['nodes'].push(temp_node_dir2);
                                            //   }

                                              if(type_ == "file"){

                                            temp_node_dir2 = {id: to, group: 'file', normal: {
                                            height: 3,
                                            fill: '#0be016',
                                            }, hovered: {
                                            height: 4,
                                            fill: '#0be016'
                                            }, selected: {
                                            height: 5,
                                            fill: '#0be016'
                                            }, shape: "square"}

                                            // new_data2['nodes'].push(temp_node_dir2);

                                            if(completed.indexOf(to) === -1){
                                                          new_data2['nodes'].push({id: to, physics:false, label: to,
                                                          size: 7, title:"File", color: "#0be016",
                                                          shape:"square"});
                                                        completed.push(to);
                                                      }

                                            }


                                            temp_node_dir = {id: from,  group: 'indetermined', normal: {
                                                        height: 6,
                                                        fill: '#000',
                                                    }, hovered: {
                                                      height: 8,
                                                        fill: '#000'
                                                    }, selected: {
                                                      height: 10,
                                                        fill: '#000'
                                                    }, shape: "square"}

                                                    // new_data2['nodes'].push(temp_node_dir);

                                                    if(completed.indexOf(from) === -1){
                                                          new_data2['nodes'].push({id: from, physics:false, label: from,
                                                          size: 5, color: "white",
                                                          shape:"square"});
                                                        completed.push(from);
                                                      }


                                            temp_edge_dir = {'from': from, 'to':to}
                                            new_data2['edges'].push({from: from, 
                                                              to: to, 
                                                              //label: input_list[j]["label"],
                                                              font: {align: "middle"},
                                                              color: "#7e8565",
                                                              size: 0.5});


                                  }


                        }
                }
              
        
      }


        });

        console.log("testing2")
        console.log(new_data2);

        set_diff(numa, numd);
        set_diff_ult(a_, b_, c_, d_, e_, f_, g_, h_, i_, j_);

        const myNode2 = document.getElementById("container2");
        myNode2.innerHTML = '';


        var nodes = new vis.DataSet(new_data2['nodes']);
        var edges = new vis.DataSet(new_data2['edges']);



      // console.log("testing2")
      // console.log(new_data);

      // const myNode2 = document.getElementById("container");

      // // var container = document.getElementById("container");
      // myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);

        

      //   var chart = anychart.graph(new_data2);
      // // set the container id
      //   chart.container("container2");
      //   chart.layout().iterationCount(2000);
      //   // chart.nodes().labels().enabled(true);
      //   // chart.nodes().labels().fontSize(10);
      //   // chart.nodes().labels().fontWeight(300);
      //   // initiate drawing the chart
      //   chart.nodes().tooltip().useHtml(true);
      //   chart.nodes().tooltip().format(
      //     "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
      //   );

      //   chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
      //   chart.interactivity().hoverGap(30);    
      //   chart.draw();
      //   chart.title("Call Graph View");
  
  
}

document.getElementById('dir_view0').onclick = function() {

  document.getElementById('mast1').style.display = "block";
  
  document.getElementById('mast2').style.display = "none";
  document.getElementById('mast3').style.display = "none";
  
  document.getElementById('mast4').style.display = "none";
  
  prev_lev = stack.pop();
  // alert(prev_lev);
  stack.push(prev_lev);
  level(prev_lev, "container" , "no");


}

document.getElementById('collab_view0').onclick = function() {

  document.getElementById('mast1').style.display = "none";
  
  document.getElementById('mast2').style.display = "none";
  document.getElementById('mast3').style.display = "block";
  
  document.getElementById('mast4').style.display = "none";

    var new_data = {'nodes': [], 'edges':[]}

    var completed = [];

    cur_sup_files.forEach((file) => {
      console.log(file);
      new_temp = calls[file];
      console.log("testing");
      console.log(new_temp);
      // File
      group = file;

      
      // console.log(new_temp);
      // for( var i = 0; i < new_temp.length ; i++){
      //   console.log(new_temp[i]);
      // }

      for (var key in new_temp) {
        if (new_temp.hasOwnProperty(key)){
          temp_new_dat = Object.values(new_temp[key]);
          console.log(temp_new_dat);
          
          for(var i in temp_new_dat){
            from = key;
            to = temp_new_dat[i][0];
            type_ = temp_new_dat[i][1];
            console.log(from + " : " + to);



            temp_node_dir = {id: from, group:'python_File(.py)', normal: {
                height: 8,
                fill: '#0099ff',
            }, hovered: {
              height: 10,
                fill: '#0099ff'
            }, selected: {
              height: 12,
                fill: '#0099ff'
            }, shape: "square"}

            // new_data['nodes'].push(temp_node_dir);

            if(completed.indexOf(from) === -1){
              new_data['nodes'].push({id: from, 
              physics:false, label: from, 
              size: 5, title:"Python File", color: "#0099ff", 
              shape:"square"});
              completed.push(from);
          }


            
            // if(type_ == "funcDef"){

            //       temp_node_dir2 = {id: to, group:'func_Def', normal: {
            //               height: 8,
            //               fill: '#2C3E50',
            //           }, hovered: {
            //             height: 10,
            //               fill: '#2C3E50'
            //           }, selected: {
            //             height: 12,
            //               fill: '#2C3E50'
            //           }, shape: "square"}

            //           new_data['nodes'].push(temp_node_dir2);
            //       }

                  if(type_ == "ClassDef"){

                      temp_node_dir2 = {id: to,group:'class_Def', normal: {
                              height: 8,
                              fill: '#920be0',
                          }, hovered: {
                            height: 10,
                              fill: '#920be0'
                          }, selected: {
                            height: 12,
                              fill: '#920be0'
                          }, shape: "circle"}

                          // new_data['nodes'].push(temp_node_dir2);

                          if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"Class Definition", color: "#920be0", 
                                shape:"triangle"});
                                completed.push(to);
                            }
                      }

                  // if(type_ == "func"){

                  // temp_node_dir2 = {id: to, group:'func_Call',normal: {
                  //         height: 6,
                  //         fill: '#76D7C4',
                  //     }, hovered: {
                  //       height: 8,
                  //         fill: '#76D7C4'
                  //     }, selected: {
                  //       height: 10,
                  //         fill: '#76D7C4'
                  //     }, shape: "square"}

                  //     new_data['nodes'].push(temp_node_dir2);
                  // }

                  if(type_ == "module"){

                    temp_node_dir2 = {id: to,group:'module', normal: {
                            height: 3,
                            fill: '#e71fc6',
                        }, hovered: {
                          height: 4,
                            fill: '#e71fc6'
                        }, selected: {
                          height: 5,
                            fill: '#e71fc6'
                        }, shape: "square"}

                        // new_data['nodes'].push(temp_node_dir2);

                        if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"Module", color: "#e71fc6", 
                                shape:"square"});
                                completed.push(to);
                            }
                    }


                    if(type_ == "file"){

                      temp_node_dir2 = {id: to, group:'file',normal: {
                              height: 3,
                              fill: '#c1e04d',
                          }, hovered: {
                            height: 4,
                              fill: '#c1e04d'
                          }, selected: {
                            height: 5,
                              fill: '#c1e04d'
                          }, shape: "square"}

                          // new_data['nodes'].push(temp_node_dir2);

                          if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"File", color: "#c1e04d", 
                                shape:"square"});
                                completed.push(to);
                            }
                      }




            temp_edge_dir = {'from': from, 'to':to}
            // new_data['edges'].push(temp_edge_dir);

            new_data['edges'].push({from: from, 
													to: to, 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});
            




          }
        }
      }


    });

    console.log("testing2")
    console.log(new_data);

    const myNode2 = document.getElementById("container");
    myNode2.innerHTML = '';

    var nodes = new vis.DataSet(new_data['nodes']);
    var edges = new vis.DataSet(new_data['edges']);



      // console.log("testing2")
      // console.log(new_data);

      // const myNode2 = document.getElementById(cont);

      // // var container = document.getElementById("container");
      // myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      };

      var network = new vis.Network(myNode2, data, options);


    // var chart = anychart.graph(new_data);
    // // set the container id
    // chart.container("container");
    // chart.layout().iterationCount(2000);
    // // chart.nodes().labels().enabled(true);
    // // chart.nodes().labels().fontSize(10);
    // // chart.nodes().labels().fontWeight(300);
    // // initiate drawing the chart
    // chart.nodes().tooltip().useHtml(true);
    //     chart.nodes().tooltip().format(
    //       "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
    //     );
    //     chart.interactivity().hoverGap(30);  
    //     chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
    // chart.draw();
    // chart.title("Collaboration Graph View");



}

document.getElementById('call_view0').onclick = function() {

  document.getElementById('mast1').style.display = "none";
  
  document.getElementById('mast2').style.display = "none";
  document.getElementById('mast3').style.display = "none";
  
  document.getElementById('mast4').style.display = "block";


  var new_data = {'nodes': [], 'edges':[]}

  var completed = [];

    cur_sup_files.forEach((file) => {
      console.log(file);
      new_temp = calls[file];
      console.log("testing");
      console.log(new_temp);
      // File
      group = file;

      
      // console.log(new_temp);
      // for( var i = 0; i < new_temp.length ; i++){
      //   console.log(new_temp[i]);
      // }

      for (var key in new_temp) {
        if (new_temp.hasOwnProperty(key)){
          temp_new_dat = Object.values(new_temp[key]);
          console.log(temp_new_dat);
          
          for(var i in temp_new_dat){
            from = key;
            to = temp_new_dat[i][0];
            type_ = temp_new_dat[i][1];
            console.log(from + " : " + to);



            temp_node_dir = {id: from, group:'python_File(.py)', normal: {
                height: 8,
                fill: '#0099ff',
            }, hovered: {
              height: 10,
                fill: '#0099ff'
            }, selected: {
              height: 12,
                fill: '#0099ff'
            }, shape: "square"}

            // new_data['nodes'].push(temp_node_dir);

            if(completed.indexOf(from) === -1){
              new_data['nodes'].push({id: from, 
              physics:false, label: from, 
              size: 5, title:"Python File", color: "#0099ff", 
              shape:"square"});
              completed.push(from);
          }


            
            if(type_ == "funcDef"){

                  temp_node_dir2 = {id: to, group:'func_Def', normal: {
                          height: 8,
                          fill: '#0e4efa',
                      }, hovered: {
                        height: 10,
                          fill: '#0e4efa'
                      }, selected: {
                        height: 12,
                          fill: '#0e4efa'
                      }, shape: "square"}

                      // new_data['nodes'].push(temp_node_dir2);

                      if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"Function Definition", color: "#0e4efa", 
                                shape:"triangle"});
                                completed.push(to);
                            }
                  }

                  // if(type_ == "ClassDef"){

                  //     temp_node_dir2 = {id: to,group:'class_Def', normal: {
                  //             height: 8,
                  //             fill: '#633974',
                  //         }, hovered: {
                  //           height: 10,
                  //             fill: '#633974'
                  //         }, selected: {
                  //           height: 12,
                  //             fill: '#633974'
                  //         }, shape: "circle"}

                  //         new_data['nodes'].push(temp_node_dir2);
                  //     }

                  if(type_ == "func"){

                  temp_node_dir2 = {id: to, group:'func_Call',normal: {
                          height: 6,
                          fill: '#e27979',
                      }, hovered: {
                        height: 8,
                          fill: '#e27979'
                      }, selected: {
                        height: 10,
                          fill: '#e27979'
                      }, shape: "triangle"}

                      // new_data['nodes'].push(temp_node_dir2);

                      if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"Function Call", color: "#e27979", 
                                shape:"triangle"});
                                completed.push(to);
                            }
                  }

                  // if(type_ == "module"){

                  //   temp_node_dir2 = {id: to,group:'module', normal: {
                  //           height: 3,
                  //           fill: '#2980B9',
                  //       }, hovered: {
                  //         height: 4,
                  //           fill: '#2980B9'
                  //       }, selected: {
                  //         height: 5,
                  //           fill: '#2980B9'
                  //       }, shape: "square"}

                  //       new_data['nodes'].push(temp_node_dir2);
                  //   }


                    if(type_ == "file"){

                      temp_node_dir2 = {id: to, group:'file',normal: {
                              height: 3,
                              fill: '#c1e04d',
                          }, hovered: {
                            height: 4,
                              fill: '#c1e04d'
                          }, selected: {
                            height: 5,
                              fill: '#c1e04d'
                          }, shape: "square"}

                          // new_data['nodes'].push(temp_node_dir2);

                          if(completed.indexOf(to) === -1){
                                new_data['nodes'].push({id: to, 
                                physics:false, label: to, 
                                size: 5, title:"File", color: "#c1e04d", 
                                shape:"square"});
                                completed.push(to);
                            }
                      }




            temp_edge_dir = {'from': from, 'to':to}
            // new_data['edges'].push(temp_edge_dir);

            new_data['edges'].push({from: from, 
													to: to, 
													//label: input_list[j]["label"],
													font: {align: "middle"},
													color: "#7e8565",
													size: 0.5});
            




          }
        }
      }


    });

    console.log("testing2")
    console.log(new_data);

    const myNode2 = document.getElementById("container");
    myNode2.innerHTML = '';
    var nodes = new vis.DataSet(new_data['nodes']);
    var edges = new vis.DataSet(new_data['edges']);



      // console.log("testing2")
      // console.log(new_data);

      // const myNode2 = document.getElementById(cont);

      // // var container = document.getElementById("container");
      // myNode2.innerHTML = '';
      

      var data = 
						{
							nodes: nodes,
							edges: edges,
						};

      var options = 
      {
        edges: {
          arrows: {
      to: {
        scaleFactor: 0.5,
        enabled: true,
        type: "arrow"
      }
    }
        }
      //   ,layout: {
      //   improvedLayout: false
      // }
      };

      var network = new vis.Network(myNode2, data, options);

  //   var chart = anychart.graph(new_data);
  // // set the container id
  //   chart.container("container");
  //   chart.layout().iterationCount(2000);
  //   // chart.nodes().labels().enabled(true);
  //   // chart.nodes().labels().fontSize(10);
  //   // chart.nodes().labels().fontWeight(300);
  //   // initiate drawing the chart
  //   chart.nodes().tooltip().useHtml(true);
  //       chart.nodes().tooltip().format(
  //         "<span style='font-weight:bold'>{{ '{%id}' }} </span><br>type: {{ '{%group}' }}"
  //       );
  //       chart.interactivity().hoverGap(30);  
  //       chart.edges().tooltip().format("{{ '{%from}' }} -> {{ '{%to}' }}");
  //   chart.draw();
  //   chart.title("Call Graph View");

}
// THE END of First View



// function getdiff(a, b){
//       var added = 0;
//       var deleted = 0;

//       var key;
//       var key2;
//       var key3;
//       var key4;

//       for (key in a){
//         if(a.hasOwnProperty(key)){
//           run = 1;
//           val = a[key]['value']
//           for (key2 in b){
//               if(b.hasOwnProperty(key2)){
//               val2 = b[key2]['value']
//               if(val == val2){
//                 run = 0;
//               }
//             }
//           }
//           if(run == 1){
//             added = added + 1;
//           }
//         }
//       }


//       for (key3 in b){
//         if(b.hasOwnProperty(key3)){
//           run = 1;
//           val = b[key3]['value']
//           for (key4 in a){
//             if(a.hasOwnProperty(key4)){
//               val2 = a[key4]['value']
//               if(val == val2){
//                 run = 0;
//               }
//             }
//           }
//           if(run == 1){
//             deleted = deleted + 1;
//           }
//         }
//       }


//     return [added, deleted]

// }


function getdiff(a, b){

      btemp = b;
      atemp = a;
      var added = 0;
      var ClassDef = [0, 0];
      var funcDef = [0, 0];
      var deleted = 0;
      var module = [0, 0];
      var func = [0, 0];
      var file = [0, 0]

      var key;
      var key2;
      var key3;
      var key4;

      for (key in a){
        if(a.hasOwnProperty(key)){
          run = 1;
          val = a[key]['value']
          for (key2 in b){
              if(b.hasOwnProperty(key2)){
              val2 = b[key2]['value']
              if(val == val2){
                run = 0;
              }
            }
          }
          if(run == 1){
            added = added + 1;
            // alert(a[key]['type']);
            // if (a[key]['type'] == 'funcDef'){
            //     funcDef[0] = funcDef[0] + 1;
            // }
            // if (a[key]['type'] == 'ClassDef'){
            //   ClassDef[0] = ClassDef[0] + 1;
            // }
            // if (a[key]['type'] == 'func'){
            //   func[0] = func[0] + 1;
            // }
            // if (a[key]['type'] == 'module'){
            //   module[0] = module[0] + 1;
            // }
            // if (a[key]['type'] == 'file'){
            //   file[0] = file[0] + 1;
            // }
          }
        }
      }

      for (key3 in btemp){
        if(btemp.hasOwnProperty(key3)){
          run = 1;
          val3 = btemp[key3]['value']
          for (key4 in atemp){
            if(atemp.hasOwnProperty(key4)){
              val4 = atemp[key4]['value']
              if(val3 == val4){
                run = 0;
                break;
              }
            }
          }

          if(run == 1){
            deleted = deleted + 1;
          }
        }
      }


    return [added, deleted]

}

function getdiff2(a, b){
      // btemp = b;
      // atemp = a;
      var added = 0;
      var deleted = 0;
      var ClassDef = [0, 0];
      var funcDef = [0, 0];
      var module = [0, 0];
      var func = [0, 0];
      var file = [0, 0]

      var key;
      var key2;
      var key3;
      var key4;

      for (key in a){
        if(a.hasOwnProperty(key)){
          run = 1;
          val = a[key][0]
          for (key2 in b){
              if(b.hasOwnProperty(key2)){
              val2 = b[key2][0]
              if(val == val2){
                run = 0;
              }
            }
          }
          if(run == 1){
            added = added + 1;
            
            if (a[key][1] == 'funcDef'){
                funcDef[0] = funcDef[0] + 1;
            }
            if (a[key][1] == 'ClassDef'){
              ClassDef[0] = ClassDef[0] + 1;
            }
            if (a[key][1] == 'func'){
              func[0] = func[0] + 1;
            }
            if (a[key][1] == 'module'){
              module[0] = module[0] + 1;
            }
            if (a[key][1] == 'file'){
              file[0] = file[0] + 1;
            }
          }
        }
      }

      for (key3 in b){
        if(b.hasOwnProperty(key3)){
          run = 1;
          val3 = b[key3][0]
          for (key4 in a){
            if(a.hasOwnProperty(key4)){
              val4 = a[key4][0]
              if(val3 == val4){
                run = 0;
                break;
              }
            }
          }

          if(run == 1){
            deleted = deleted + 1;

            if (a[key][1] == 'funcDef'){
                funcDef[1] = funcDef[1] + 1;
            }
            if (a[key][1] == 'ClassDef'){
              ClassDef[1] = ClassDef[1] + 1;
            }
            if (a[key][1] == 'func'){
              func[1] = func[1] + 1;
            }
            if (a[key][1] == 'module'){
              module[1] = module[1] + 1;
            }
            if (a[key][1] == 'file'){
              file[1] = file[1] + 1;
            }
          }
        }
      }


    return [added, deleted, funcDef, ClassDef, func, module, file]

}
// function getobjs()

function set_diff(a, b){
  document.getElementById('num_added').innerHTML = 'Added: ' + a;
  document.getElementById('num_deleted').innerHTML = 'Removed: ' + b; 
}

function set_diff1(a){
  document.getElementById('num_added').innerHTML = 'Added: ' + a;
  document.getElementById('num_deleted').innerHTML = 'Removed: 0'; 
}

function set_diff_ult(a,b,c,d,e, f, g, h, i, j){

  document.getElementById('funcDef_added').innerHTML = 'Function Defintions (Added: ' + a + ' Removed: ' + b + ')';

  document.getElementById('classes_added').innerHTML = 'Class Definition (Added: ' + c + ' Removed: ' + d + ')';

  document.getElementById('func_added').innerHTML = 'Function Calls (Added: ' + e + ' Removed: ' + f + ')';

  document.getElementById('modules_added').innerHTML = 'Modules (Added: ' + g + ' Removed: ' + h + ')';

  document.getElementById('files_added').innerHTML = 'Files (Added: ' + i + ' Removed: ' + j + ')';

}
</script>



</html>